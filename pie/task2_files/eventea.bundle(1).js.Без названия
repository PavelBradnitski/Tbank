!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){if(this instanceof e){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(t,n))}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var n,r,o={},i={},s={},a={};function c(){return r||(r=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EventeaQueueObserver=e.EventeaQueue=e.EventeaStatistQueue=void 0;var t=function(){if(n)return a;n=1,Object.defineProperty(a,"__esModule",{value:!0}),a.EventeaStatistQueue=void 0;const e="eventeaStatist";return a.EventeaStatistQueue=class{constructor(){this.instance=null,this.resolveInstance=()=>{},this.instancePromise=new Promise((e=>{this.resolveInstance=e})),this.updateClientParameters=(...e)=>{if(this.instance)return this.instance.updateClientParameters(...e);this.instancePromise.then((t=>t.updateClientParameters(...e)))};const t=e=>{this.instance=e,this.resolveInstance(e)},n=window[e];if(n)return void t(n);const r=Object.getOwnPropertyDescriptor(window,e);Object.defineProperty(window,e,{set:e=>{var n;null===(n=null==r?void 0:r.set)||void 0===n||n.call(r,e),t(e)},configurable:!0})}},a}();Object.defineProperty(e,"EventeaStatistQueue",{enumerable:!0,get:function(){return t.EventeaStatistQueue}});const r="undefined"!=typeof window?window:void 0;e.EventeaQueue=class{__addEventToStore(...e){(null==r?void 0:r._evnteq)&&r._evnteq.push(...e)}get getQueue(){var e;return Array.isArray(null==r?void 0:r._evnteq)?null==r?void 0:r._evnteq:null===(e=null==r?void 0:r._evnteq)||void 0===e?void 0:e.queue}constructor(e){var t,n;this.errorHandlers=null==e?void 0:e.errorHandlers,r?!r._evnteq&&(r._evnteq=[]):null===(n=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===n||n.call(t)}send(e){this.__addEventToStore(["send",e])}sendOnce(e){return this.__addEventToStore(["sendOnce",e]),!0}data(e){this.__addEventToStore(["data",e])}};e.EventeaQueueObserver=class{set watch(e){var t,n;this.observerSuspended?null===(n=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===n||n.call(t):(this.watcher=e,this.push(...this.queue),this.queue=[])}push(...e){var t,n;if(this.watcher)try{this.watcher(e)}catch(e){const{message:r}=e;null===(n=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleObserverWatcherErrors)||void 0===n||n.call(t,r)}else this.queue.push(...e)}constructor(e){var t,n;this.observerSuspended=!1,this.queue=[],this.errorHandlers=null==e?void 0:e.errorHandlers,r?(Array.isArray(r._evnteq)&&this.queue.push(...r._evnteq),r._evnteq=this):(this.observerSuspended=!0,null===(n=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===n||n.call(t))}}}(s)),s}var u,l={},d={};var f,h={};var p,v={};var g,y={},m={};var b,S,w={};function j(){return S||(S=1,t=y,a=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),c=e&&e.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)},Object.defineProperty(t,"__esModule",{value:!0}),c((g||(g=1,Object.defineProperty(m,"__esModule",{value:!0}),m.EventeaFeaturesBits=void 0,function(e){e[e.DiagStats=1]="DiagStats"}(n||(m.EventeaFeaturesBits=n={}))),m),t),c((b||(b=1,Object.defineProperty(w,"__esModule",{value:!0}),w.sendDiagMessage=w.DiagMessageType=w.HandlerStatus=w.SentStatus=w.IncompleteReason=void 0,function(e){e[e.MissedProject=0]="MissedProject",e[e.MissedRouting=1]="MissedRouting",e[e.MissedEvent=2]="MissedEvent",e[e.MissedRoutes=3]="MissedRoutes"}(r||(w.IncompleteReason=r={})),function(e){e[e.Routed=0]="Routed",e[e.IncompleteRouting=1]="IncompleteRouting",e[e.Deprecated=2]="Deprecated",e[e.Dead=3]="Dead"}(o||(w.SentStatus=o={})),function(e){e[e.Handled=0]="Handled",e[e.MissedHandler=1]="MissedHandler",e[e.HandlerErrored=2]="HandlerErrored"}(i||(w.HandlerStatus=i={})),function(e){e[e.SendStart=0]="SendStart",e[e.SentStats=1]="SentStats"}(s||(w.DiagMessageType=s={})),w.sendDiagMessage=function(e){if("undefined"!=typeof window)try{const t=new CustomEvent("__evntx10t",{bubbles:!0,detail:e});document.dispatchEvent(t)}catch(e){}}),w),t)),y;var t,n,r,o,i,s,a,c}var E,_,P,O={};function M(){if(_)return l;_=1,Object.defineProperty(l,"__esModule",{value:!0}),l.Eventea=void 0;const e=function(){if(u)return d;u=1,Object.defineProperty(d,"__esModule",{value:!0}),d.EventeaBeerClient=void 0;const e=64e3;return d.EventeaBeerClient=class{constructor(e){if(this.batch=[],this.timer=null,"undefined"==typeof window)throw new Error("Eventea beer client is not isomorphic package");{const{baseUrl:t,batching:n}=e;this._request=e=>fetch(`${t}${e.method}`,{...e,method:e.httpMethod,keepalive:null==n?void 0:n.batchingEnable}).then((e=>e.json())),this.batchingEnable=(null==n?void 0:n.batchingEnable)||!1,this.batchSize=(null==n?void 0:n.batchSize)||50,this.batchDelay=(null==n?void 0:n.batchDelay)||50,document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.sendRemainingBatch()}))}}event(e){const t=this.formatEvent(e);return this.batchingEnable?(this.batch.push(t),this.batchSize>this.batch.length?(1===this.batch.length&&(this.timer=setTimeout((()=>this.sendBatch()),this.batchDelay)),Promise.resolve()):this.sendBatch()):this.sendImmediately(t)}sendAbstractEvent(e){this.event(e)}formatEvent(e){var t,n,r,o,i;const s=(null===(t=e.handlersData)||void 0===t?void 0:t.blockType)||(null===(n=e.payload)||void 0===n?void 0:n.blockType),a=(null===(r=e.handlersData)||void 0===r?void 0:r.blockProject)||(null===(o=e.payload)||void 0===o?void 0:o.blockProject);return{project:e.project,event:e.event,payload:{...e.payload||{},appName:null===(i=e.handlersData)||void 0===i?void 0:i.appName,blockType:s,blockProject:a}}}sendRequest(e){return this._request({method:"event",httpMethod:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"},credentials:"omit"}).catch((()=>{}))}sendImmediately(e){return this.sendRequest(e)}calculateBatchSize(e){const t=JSON.stringify(e);return new Blob([t]).size}splitBatch(t){const n=[];let r=[];if(this.calculateBatchSize(t)<=e)return[t];for(const o of t){if(this.calculateBatchSize([o])>e){this.sendRequest({project:"eventea",event:"keepAliveDataExceed",payload:{eventName:o.event}});continue}const t=[...r,o];this.calculateBatchSize(t)>e?(n.push(r),r=[o]):r=t}return r.length>0&&n.push(r),n}async sendBatch(){const e=this.splitBatch(this.batch);this.batch=[],this.timer&&(clearTimeout(this.timer),this.timer=null);for(const t of e)await this.sendRequest(t)}sendRemainingBatch(){this.batch.length>0&&this.sendBatch()}},d}(),t=(f||(f=1,Object.defineProperty(h,"__esModule",{value:!0}),h.EventeaDataState=void 0,h.EventeaDataState=class{constructor(e){this.__state={},(null==e?void 0:e.initData)&&e.initData&&(this.__state=e.initData)}add(e){const{project:t,payload:n}=e;this.__state[t]={...this.__state[t],...n}}get(e,t){if(this.__state[e])return this.__state[e][t]}get _getAll(){return this.__state}}),h),n=function(){if(p)return v;p=1,Object.defineProperty(v,"__esModule",{value:!0}),v.sendPostMessage=void 0;const e="undefined"!=typeof window?window:void 0;return v.sendPostMessage=({type:t,payload:n,config:r={}})=>{const{targetOrigin:o="*",payloadProperty:i}=r;e&&(e.top||e.opener||e.parent).postMessage(JSON.stringify({type:t,...i?{[i]:n}:n}),o)},v}(),r=j(),o=j(),i=function(){if(E)return O;function e(e,t){return("string"==typeof e||"number"==typeof e||"boolean"==typeof e)&&t.includes(e)}return E=1,Object.defineProperty(O,"__esModule",{value:!0}),O.filterPayloadByWhitelist=void 0,O.filterPayloadByWhitelist=function(t,n){const r={...t};for(const o in n)if(o in t&&o in n)for(const i in n[o])i in t&&e(t[i],n[o][i])||delete r[o];return r},O}();class s{constructor(r){if(this.defaultEventHandlers={...r.defaultEventHandlers},this.defaultDataHandlers={...r.defaultDataHandlers},"undefined"==typeof window||window.__evntfxb1ts||(window.__evntfxb1ts=o.EventeaFeaturesBits.DiagStats),this.defaultEventHandlers.postMessage=({event:e,config:t,payload:r})=>(0,n.sendPostMessage)({type:e,config:t,payload:r}),r.beerBaseUrl){const t=new e.EventeaBeerClient({baseUrl:r.beerBaseUrl,batching:r.batchingConfig});this.defaultEventHandlers["eventea-beer"]=e=>null==t?void 0:t.sendAbstractEvent(e)}this.routingClientLoader=r.routingClientLoader,this.projectConfigurationMap=r.projectConfigurationMap,this.errorHandlers=r.errorHandlers,this.handlersData=r.handlersData||{},this.onceSentEvents=r.onceSentEvents||new Map,this.handleAnyEvent=r.handleAnyEvent,this.eventeaDataState=new t.EventeaDataState({initData:r.data}),this.eventeaReferenceDataState=r.referenceData}doSend(e){var t,n,o,s;const{project:a,event:c}=e,u=this.projectConfigurationMap[a];let l=e;const d=t=>(0,r.sendDiagMessage)({type:r.DiagMessageType.SentStats,event:e,stats:t});if(!u)return this.errorHandlers.handleMissedProject({event:c,project:a}),void d({status:r.SentStatus.IncompleteRouting,reason:r.IncompleteReason.MissedProject});const f=u.routing;if(!f)return this.errorHandlers.handleMissedRouting({project:a}),void d({status:r.SentStatus.IncompleteRouting,reason:r.IncompleteReason.MissedProject});const h=f.events;if(!h)return this.errorHandlers.handleMissedRouting({project:a}),void d({status:r.SentStatus.IncompleteRouting,reason:r.IncompleteReason.MissedRouting});const p=h[c];if(!p)return this.errorHandlers.handleMissedEvent({event:c,project:a}),void d({status:r.SentStatus.IncompleteRouting,reason:r.IncompleteReason.MissedEvent});if(l.payload&&"allowIfMatch"in p&&p.allowIfMatch&&(l.payload=(0,i.filterPayloadByWhitelist)(l.payload,p.allowIfMatch)),"fromData"in p&&p.fromData){const{fromData:e}=p,t={};Object.keys(e).forEach((n=>{const r=this.getDataFromState(a,n,e);r&&(t[n]=r)})),l={...l,payload:{...t,...l.payload}}}const v=this._getTracking();if("fromDataPool"in p&&p.fromDataPool&&v){const e={};for(const t of Object.keys(p.fromDataPool)){const n=p.fromDataPool[t];n in v._prot.dataPool&&(e[t]=v._prot.dataPool[n])}const t=v._prot.collectDataElements(e);l={...l,payload:{...t,...l.payload}}}let g=this.handlersData;if(f.statist&&(g={...g,statist:f.statist}),this.handleAnyEvent&&this.handleAnyEvent({...l,eventRouting:p,handlersData:g}),"isDeprecated"in p&&p.isDeprecated)return null===(n=(t=this.errorHandlers).handleDeprecatedEvent)||void 0===n||n.call(t,{event:c,project:a}),void d({status:r.SentStatus.Deprecated});if(!("routes"in p))return null===(s=(o=this.errorHandlers).handleMissedRoutes)||void 0===s||s.call(o,{event:c,project:a}),void d({status:r.SentStatus.IncompleteRouting,reason:r.IncompleteReason.MissedRoutes});const y=Object.getOwnPropertyNames(p.routes);if(this.debugLogEvent(e,y),0==y.length)d({status:r.SentStatus.Dead});else{const e={};y.forEach((t=>{var n;const o=(null===(n=u.eventHandlers)||void 0===n?void 0:n[t])||this.defaultEventHandlers[t];if(!o)return this.errorHandlers.handleMissedEventHandler({project:a,event:c,routeHandlerName:t}),void(e[t]={status:r.HandlerStatus.MissedHandler});const i=p.routes[t],s={...l,config:i,handlersData:g};try{o(s),e[t]={status:r.HandlerStatus.Handled}}catch(n){if(e[t]={status:r.HandlerStatus.HandlerErrored,error:n},!this.errorHandlers.handleEventHandlerError)throw n;this.errorHandlers.handleEventHandlerError(n,t,s)}})),d({status:r.SentStatus.Routed,routesStats:e})}}send(e){const t=e;(0,r.sendDiagMessage)({type:r.DiagMessageType.SendStart,event:t});const{project:n}=t,o=this.projectConfigurationMap[n];(null==o?void 0:o.routing)||!this.routingClientLoader?this.doSend(t):this.restoreProjectConfiguration(n).catch((()=>{(0,r.sendDiagMessage)({type:r.DiagMessageType.SentStats,event:t,stats:{status:r.SentStatus.IncompleteRouting,reason:r.IncompleteReason.MissedProject}})})).then((()=>{this.doSend(t)}))}sendOnce(e,t=!0,n=[]){const r=e,o=`${r.project}/${r.event}`;this.onceSentEvents.has(o)||this.onceSentEvents.set(o,new Set);const i=this.onceSentEvents.get(o);return!i.has(t)&&(this.send(r),n.forEach((e=>{i.add(e)})),i.add(t),!0)}doData(e){var t,n,r,o;const{project:i}=e,s=this.projectConfigurationMap[i];if(!s)return void(null===(n=(t=this.errorHandlers).handleMissedDataProject)||void 0===n||n.call(t,{project:i}));const{dataHandlers:a={}}=s,c={...this.defaultDataHandlers,...a};for(const t of Object.keys(c)){const n=c[t];"function"==typeof n?n(e):null===(o=(r=this.errorHandlers).handleMissedDataHandler)||void 0===o||o.call(r,{project:i,handlerName:t})}this.eventeaDataState.add(e)}data(e){const t=e,{project:n}=t,r=this.projectConfigurationMap[n];(null==r?void 0:r.routing)||!this.routingClientLoader?this.doData(t):this.restoreProjectConfiguration(n).finally((()=>{this.doData(t)}))}restoreProjectConfiguration(e){const t=this.projectConfigurationMap[e];return!(null==t?void 0:t.routing)&&this.routingClientLoader?this.routingClientLoader.getRouting(e).then((n=>{t?t.routing=n:this.projectConfigurationMap[e]={routing:n}}),(t=>{var n,r;throw t||null===(r=(n=this.errorHandlers).handleMissedClientRouting)||void 0===r||r.call(n,{project:e}),t})):Promise.resolve()}replicateWithData(e){const t={...this.eventeaDataState._getAll,...null==e?void 0:e.additionalDataState};return new s({errorHandlers:this.errorHandlers,handlersData:{...this.handlersData,...null==e?void 0:e.additionalHandlersData},projectConfigurationMap:this.projectConfigurationMap,onceSentEvents:this.onceSentEvents,defaultEventHandlers:this.defaultEventHandlers,defaultDataHandlers:this.defaultDataHandlers,data:t})}getDataFromState(e,t,n){var r,o;const i=n[t];return null!==(r=this.eventeaDataState.get(e,i))&&void 0!==r?r:null===(o=this.eventeaReferenceDataState)||void 0===o?void 0:o.get(e,i)}_getTracking(){if("undefined"!=typeof window&&window.tracking&&tracking._prot)return window.tracking}debugLogEvent(e,t){try{if("undefined"!=typeof window&&window.localStorage.getItem("eventeaLog")){const{project:n,event:r,payload:o}=e;console.log(`%c[Eventea]%c send event %c${n}/${r}%c to [${t.length?t.join(","):"0 routes"}]`,"background: yellow","","font-weight: bold","",null!=o?o:"")}}catch(e){}}}return l.Eventea=s,l}var C,D,R={};var k,T=(D||(D=1,function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.RootEventea=t.Eventea=void 0;const o=function(){if(P)return i;P=1,Object.defineProperty(i,"__esModule",{value:!0}),i.RootEventea=void 0;const e=c(),t=M();return i.RootEventea=class extends t.Eventea{constructor(t){super(t),this.eventeaQueueObserver=new e.EventeaQueueObserver({errorHandlers:{handleQueueUsageAtServer:this.errorHandlers.handleQueueUsageAtServer,handleObserverWatcherErrors:this.errorHandlers.handleObserverWatcherErrors}}),this.eventeaQueueObserver.watch=e=>{e.forEach((([e,t])=>{var n,r,o,i;try{switch(e){case"send":this.send(t);break;case"sendOnce":this.sendOnce(t);break;case"data":this.data(t);break;default:null===(r=(n=this.errorHandlers).handleUnknownMethodInQueue)||void 0===r||r.call(n,{requestType:e})}}catch(n){null===(i=(o=this.errorHandlers).handleErrorQueueEvent)||void 0===i||i.call(o,{requestType:e,requestData:t})}}))}}createChild(e){const n=e.copyParentHandlersData?{...this.handlersData,...null==e?void 0:e.handlersData}:e.handlersData;return new t.Eventea({referenceData:e.includeParentDataState?this.eventeaDataState:void 0,defaultDataHandlers:this.defaultDataHandlers,defaultEventHandlers:this.defaultEventHandlers,errorHandlers:this.errorHandlers,handlersData:n,projectConfigurationMap:this.projectConfigurationMap,routingClientLoader:this.routingClientLoader})}},i}();Object.defineProperty(t,"Eventea",{enumerable:!0,get:function(){return o.RootEventea}}),Object.defineProperty(t,"RootEventea",{enumerable:!0,get:function(){return o.RootEventea}}),r((C||(C=1,Object.defineProperty(R,"__esModule",{value:!0})),R),t)}(o)),o),H={},A={},I={},U={};function L(){return k||(k=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.requestWithRetry=e.handleRetryOptions=void 0;const t=async e=>{const{timeout:t=5e3,url:n}=e,r=new AbortController,o=((e,t)=>setTimeout((()=>e.abort()),t))(r,t),i=await fetch(n,{...e,signal:r.signal});return clearTimeout(o),i};e.handleRetryOptions=e=>{const t={timeout:null==e?void 0:e.timeout,retry:null==e?void 0:e.retry,retryTimeout:null==e?void 0:e.retryTimeout};return t.retry=t.retry?t.retry:t.timeout&&t.retryTimeout?t.timeout/t.retryTimeout:2,t.retryTimeout=t.retryTimeout?t.retryTimeout:t.timeout&&t.retry?t.timeout/t.retry:2500,t.timeout=t.timeout?t.timeout:t.retryTimeout&&t.retry?t.retryTimeout*t.retry:15e3,t};e.requestWithRetry=async(n,r)=>{var o;const{retry:i,retryTimeout:s}=(0,e.handleRetryOptions)(r);let a,c,u;for(const e of function*(){let e=0;for(;i>e;)yield t({url:n,timeout:s}),e+=1}())try{a=await e;break}catch(e){c=e;continue}if(!a)throw c;return(null===(o=a.headers.get("content-type"))||void 0===o?void 0:o.includes("application/json"))?u=await a.json():a&&(u=await a.text()),{status:a.status,body:u}}}(U)),U}var $,q,N,z,x={};function B(){return q||(q=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ClientSingleLoader=e.requestWithRetry=void 0;const t=L(),n=($||($=1,Object.defineProperty(x,"__esModule",{value:!0}),x.routingValidator=void 0,x.routingValidator={check:e=>!(!e||"object"!=typeof e||!e.version||!e.events||"v4"!==e.version),getErrors:e=>[`${JSON.stringify(e)}: doesn't match a valid v4 routing schema`]}),x);var r=L();Object.defineProperty(e,"requestWithRetry",{enumerable:!0,get:function(){return r.requestWithRetry}});e.ClientSingleLoader=class{constructor(e){this.currentRequest=null,this.makeRequest=()=>{this.currentRequest=this.request(this.url,{timeout:this.timeout}),this.currentRequest.then((e=>{400>e.status?n.routingValidator.check(e.body)?this.currentRouting=e.body:this.handleRequestError({project:this.project,validationErrors:n.routingValidator.getErrors(e.body)}):this.handleRequestError({project:this.project,status:e.status})}),(e=>{this.handleRequestError({project:this.project,reason:e})})).finally((()=>{this.currentRequest=null}))};const{url:r,baseUrl:o,projectName:i,timeout:s=5e3,fallback:a}=e;if(this.project=i,this.url=r||((e,t)=>{let n=t;return t.endsWith("/")||(n+="/"),`${n}v4/${e}.json`})(i,o),this.handleRequestError=e.handleRequestError,this.timeout=s,this.request=t.requestWithRetry,a){if(!n.routingValidator.check(a)){const t=n.routingValidator.getErrors(e.fallback);throw new Error(`fallback должен быть валидным роутингом:\n${t.join("\n")}`)}this.fallback=a}}handleRequest(){this.currentRouting||this.currentRequest||this.makeRequest()}getRouting(){return this.handleRequest(),this.currentRouting?Promise.resolve(this.currentRouting):this.currentRequest?this.currentRequest.then((()=>{const e=this.currentRouting||this.fallback;return e||Promise.reject(void 0)}),(()=>this.fallback?this.fallback:Promise.reject(void 0))):Promise.reject(void 0)}}}(I)),I}var F,V,J,Q=(z||(z=1,F=H,V=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),J=e&&e.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||V(t,e,n)},Object.defineProperty(F,"__esModule",{value:!0}),J(function(){if(N)return A;N=1,Object.defineProperty(A,"__esModule",{value:!0}),A.ClientLoader=void 0;const e=B(),t=()=>({});return A.ClientLoader=class{constructor(n){this.projectSingleLoaders={},this.getSingleLoaderInstance=t=>new e.ClientSingleLoader({projectName:"string"==typeof t?t:t.projectName,fallback:"string"==typeof t?void 0:t.fallback,handleRequestError:this.handleRequestError,timeout:this.timeout,baseUrl:this.baseUrl}),this.getPreloadRoutings=()=>{for(const e of this.preloadProjects){const t="string"==typeof e?e:e.projectName;this.projectSingleLoaders[t]=this.getSingleLoaderInstance(e),this.projectSingleLoaders[t].handleRequest()}},this.addNewLoaderInstance=e=>(this.projectSingleLoaders[e]=this.getSingleLoaderInstance(e),this.projectSingleLoaders[e]);const{baseUrl:r,preloadProjects:o,timeout:i,handleRequestError:s}=n;this.preloadProjects=o,this.baseUrl=r,this.timeout=i,this.handleRequestError=s||t,this.getPreloadRoutings()}async getRouting(e){return e in this.projectSingleLoaders?this.projectSingleLoaders[e].getRouting():this.addNewLoaderInstance(e).getRouting()}},A}(),F)),H);const W={info:!0,warn:!0,error:!0,debug:!0,trace:!0,fatal:!0};var Z={},G={},X=function(){return X=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},X.apply(this,arguments)};function K(e){return e.toLowerCase()}"function"==typeof SuppressedError&&SuppressedError;var Y=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],ee=/[^A-Z0-9]+/gi;function te(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}function ne(e,t){var n=e.charAt(0),r=e.substr(1).toLowerCase();return 0>=t||"0">n||n>"9"?""+n.toUpperCase()+r:"_"+n+r}function re(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,r=t.stripRegexp,o=void 0===r?ee:r,i=t.transform,s=void 0===i?K:i,a=t.delimiter,c=void 0===a?" ":a,u=te(te(e,void 0===n?Y:n,"$1\0$2"),o,"\0"),l=0,d=u.length;"\0"===u.charAt(l);)l++;for(;"\0"===u.charAt(d-1);)d--;return u.slice(l,d).split("\0").map(s).join(c)}(e,X({delimiter:"",transform:ne},t))}function oe(e,t){return 0===t?e.toLowerCase():ne(e,t)}var ie,se,ae=t(Object.freeze({__proto__:null,camelCaseTransform:oe,camelCaseTransformMerge:function(e,t){return 0===t?e.toLowerCase():function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}(e)},camelCase:function(e,t){return void 0===t&&(t={}),re(e,X({transform:oe},t))}}));function ce(){if(ie)return G;ie=1,Object.defineProperty(G,"__esModule",{value:!0}),G.statistHandlerFactory=void 0;const e=ae;function t(){if("undefined"!=typeof window&&window.tracking&&tracking._prot)return window.tracking}return G.statistHandlerFactory=function({statistClient:n}){return({event:r,payload:o,project:i,config:s,handlersData:a})=>{var c;let u=o||{};if(!function(e){return"object"==typeof e&&null!==e}(s))throw new Error("Unknown config for statist handler");{const l=`eventea.projects.${(0,e.camelCase)(i)}`,d=s.fullName||r,f=t(),h=a&&a.statist?a.statist:void 0;if(h&&h.commonParams&&f){const e={};for(const t of Object.keys(h.commonParams)){const{deprecated:n}=h.commonParams[t];!n&&t in f._prot.dataPool&&(e[t]=f._prot.dataPool[t])}u={...f._prot.collectDataElements(e),...u}}const{remapAsList:p}=s;if(p)for(const e of Object.keys(p))u[e]=p[e].params.map((t=>{var n,r,i;const s=(null===(n=p[e].paramsSource)||void 0===n?void 0:n[t])||"event";return"event"===s&&o&&t in o?String(null!==(r=o[t])&&void 0!==r?r:""):"dataPool"===s&&f&&t in f._prot.dataPool?String(null!==(i=f._prot.collectDataElement(f._prot.dataPool[t]))&&void 0!==i?i:""):""}));n.send(l,d,u);const v=null===(c=s.userProperties)||void 0===c?void 0:c.increment;v&&n.updateUserProperties(l,"increment",v)}}},G}var ue=(se||(se=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.statistHandlerFactory=void 0;var t=ce();Object.defineProperty(e,"statistHandlerFactory",{enumerable:!0,get:function(){return t.statistHandlerFactory}})}(Z)),Z);let le;const de=new Uint8Array(16);function fe(){if(!le&&(le="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!le))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return le(de)}var he=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const pe=[];for(let e=0;256>e;++e)pe.push((e+256).toString(16).slice(1));function ve(e,t=0){return pe[e[t+0]]+pe[e[t+1]]+pe[e[t+2]]+pe[e[t+3]]+"-"+pe[e[t+4]]+pe[e[t+5]]+"-"+pe[e[t+6]]+pe[e[t+7]]+"-"+pe[e[t+8]]+pe[e[t+9]]+"-"+pe[e[t+10]]+pe[e[t+11]]+pe[e[t+12]]+pe[e[t+13]]+pe[e[t+14]]+pe[e[t+15]]}function ge(e){if(!function(e){return"string"==typeof e&&he.test(e)}(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}function ye(e,t,n){function r(e,r,o,i){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;e.length>n;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=ge(r)),16!==(null===(s=r)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),a=n(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,o){i=i||0;for(let e=0;16>e;++e)o[i+e]=a[e];return o}return ve(a)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function me(e){return 14+(e+64>>>9<<4)+1}function be(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Se(e,t,n,r,o,i){return be((s=be(be(t,e),be(r,i)))<<(a=o)|s>>>32-a,n);var s,a}function we(e,t,n,r,o,i,s){return Se(t&n|~t&r,e,t,o,i,s)}function je(e,t,n,r,o,i,s){return Se(t&r|n&~r,e,t,o,i,s)}function Ee(e,t,n,r,o,i,s){return Se(t^n^r,e,t,o,i,s)}function _e(e,t,n,r,o,i,s){return Se(n^(t|~r),e,t,o,i,s)}ye("v3",48,(function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;t.length>n;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,r="0123456789abcdef";for(let o=0;n>o;o+=8){const n=e[o>>5]>>>o%32&255,i=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[me(t)-1]=t;let n=1732584193,r=-271733879,o=-1732584194,i=271733878;for(let t=0;e.length>t;t+=16){const s=n,a=r,c=o,u=i;n=we(n,r,o,i,e[t],7,-680876936),i=we(i,n,r,o,e[t+1],12,-389564586),o=we(o,i,n,r,e[t+2],17,606105819),r=we(r,o,i,n,e[t+3],22,-1044525330),n=we(n,r,o,i,e[t+4],7,-176418897),i=we(i,n,r,o,e[t+5],12,1200080426),o=we(o,i,n,r,e[t+6],17,-1473231341),r=we(r,o,i,n,e[t+7],22,-45705983),n=we(n,r,o,i,e[t+8],7,1770035416),i=we(i,n,r,o,e[t+9],12,-1958414417),o=we(o,i,n,r,e[t+10],17,-42063),r=we(r,o,i,n,e[t+11],22,-1990404162),n=we(n,r,o,i,e[t+12],7,1804603682),i=we(i,n,r,o,e[t+13],12,-40341101),o=we(o,i,n,r,e[t+14],17,-1502002290),r=we(r,o,i,n,e[t+15],22,1236535329),n=je(n,r,o,i,e[t+1],5,-165796510),i=je(i,n,r,o,e[t+6],9,-1069501632),o=je(o,i,n,r,e[t+11],14,643717713),r=je(r,o,i,n,e[t],20,-373897302),n=je(n,r,o,i,e[t+5],5,-701558691),i=je(i,n,r,o,e[t+10],9,38016083),o=je(o,i,n,r,e[t+15],14,-660478335),r=je(r,o,i,n,e[t+4],20,-405537848),n=je(n,r,o,i,e[t+9],5,568446438),i=je(i,n,r,o,e[t+14],9,-1019803690),o=je(o,i,n,r,e[t+3],14,-187363961),r=je(r,o,i,n,e[t+8],20,1163531501),n=je(n,r,o,i,e[t+13],5,-1444681467),i=je(i,n,r,o,e[t+2],9,-51403784),o=je(o,i,n,r,e[t+7],14,1735328473),r=je(r,o,i,n,e[t+12],20,-1926607734),n=Ee(n,r,o,i,e[t+5],4,-378558),i=Ee(i,n,r,o,e[t+8],11,-2022574463),o=Ee(o,i,n,r,e[t+11],16,1839030562),r=Ee(r,o,i,n,e[t+14],23,-35309556),n=Ee(n,r,o,i,e[t+1],4,-1530992060),i=Ee(i,n,r,o,e[t+4],11,1272893353),o=Ee(o,i,n,r,e[t+7],16,-155497632),r=Ee(r,o,i,n,e[t+10],23,-1094730640),n=Ee(n,r,o,i,e[t+13],4,681279174),i=Ee(i,n,r,o,e[t],11,-358537222),o=Ee(o,i,n,r,e[t+3],16,-722521979),r=Ee(r,o,i,n,e[t+6],23,76029189),n=Ee(n,r,o,i,e[t+9],4,-640364487),i=Ee(i,n,r,o,e[t+12],11,-421815835),o=Ee(o,i,n,r,e[t+15],16,530742520),r=Ee(r,o,i,n,e[t+2],23,-995338651),n=_e(n,r,o,i,e[t],6,-198630844),i=_e(i,n,r,o,e[t+7],10,1126891415),o=_e(o,i,n,r,e[t+14],15,-1416354905),r=_e(r,o,i,n,e[t+5],21,-57434055),n=_e(n,r,o,i,e[t+12],6,1700485571),i=_e(i,n,r,o,e[t+3],10,-1894986606),o=_e(o,i,n,r,e[t+10],15,-1051523),r=_e(r,o,i,n,e[t+1],21,-2054922799),n=_e(n,r,o,i,e[t+8],6,1873313359),i=_e(i,n,r,o,e[t+15],10,-30611744),o=_e(o,i,n,r,e[t+6],15,-1560198380),r=_e(r,o,i,n,e[t+13],21,1309151649),n=_e(n,r,o,i,e[t+4],6,-145523070),i=_e(i,n,r,o,e[t+11],10,-1120210379),o=_e(o,i,n,r,e[t+2],15,718787259),r=_e(r,o,i,n,e[t+9],21,-343485551),n=be(n,s),r=be(r,a),o=be(o,c),i=be(i,u)}return[n,r,o,i]}(function(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(me(t));for(let r=0;t>r;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))}));var Pe,Oe,Me,Ce,De={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Re(e,t,n){if(De.randomUUID&&!t&&!e)return De.randomUUID();const r=(e=e||{}).random||(e.rng||fe)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;16>e;++e)t[n+e]=r[e];return t}return ve(r)}function ke(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function Te(e,t){return e<<t|e>>>32-t}function He(){return Oe||(Oe=1,Pe=function(e,t){return function n(){for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return e>o.length?function(){for(var e=arguments.length,t=new Array(e),r=0;e>r;r++)t[r]=arguments[r];return n.apply(this,o.concat(t))}:t.apply(this,o)}}),Pe}function Ae(){if(Ce)return Me;Ce=1;var e=He();return Me=e(2,(function(e,t){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}))}ye("v5",80,(function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;t.length>n;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=Math.ceil((e.length/4+2)/16),o=new Array(r);for(let t=0;r>t;++t){const n=new Uint32Array(16);for(let r=0;16>r;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];o[t]=n}o[r-1][14]=8*(e.length-1)/Math.pow(2,32),o[r-1][14]=Math.floor(o[r-1][14]),o[r-1][15]=8*(e.length-1)&4294967295;for(let e=0;r>e;++e){const r=new Uint32Array(80);for(let t=0;16>t;++t)r[t]=o[e][t];for(let e=16;80>e;++e)r[e]=Te(r[e-3]^r[e-8]^r[e-14]^r[e-16],1);let i=n[0],s=n[1],a=n[2],c=n[3],u=n[4];for(let e=0;80>e;++e){const n=Math.floor(e/20),o=Te(i,5)+ke(n,s,a,c)+u+t[n]+r[e]>>>0;u=c,c=a,a=Te(s,30)>>>0,s=i,i=o}n[0]=n[0]+i>>>0,n[1]=n[1]+s>>>0,n[2]=n[2]+a>>>0,n[3]=n[3]+c>>>0,n[4]=n[4]+u>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));var Ie,Ue={},Le={get exports(){return Ue},set exports(e){Ue=e}},$e={};var qe,Ne,ze,xe,Be,Fe,Ve,Je,Qe,We,Ze,Ge,Xe,Ke,Ye,et,tt,nt,rt={};function ot(){return Ne||(Ne=1,Le.exports="production"===process.env.NODE_ENV?function(){if(Ie)return $e;Ie=1;var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,v=e?Symbol.for("react.block"):60121,g=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,m=e?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var f=e.$$typeof;switch(f){case t:switch(e=e.type){case c:case u:case r:case i:case o:case d:return e;default:switch(e=e&&e.$$typeof){case a:case l:case p:case h:case s:return e;default:return f}}case n:return f}}}function S(e){return b(e)===u}return $e.AsyncMode=c,$e.ConcurrentMode=u,$e.ContextConsumer=a,$e.ContextProvider=s,$e.Element=t,$e.ForwardRef=l,$e.Fragment=r,$e.Lazy=p,$e.Memo=h,$e.Portal=n,$e.Profiler=i,$e.StrictMode=o,$e.Suspense=d,$e.isAsyncMode=function(e){return S(e)||b(e)===c},$e.isConcurrentMode=S,$e.isContextConsumer=function(e){return b(e)===a},$e.isContextProvider=function(e){return b(e)===s},$e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},$e.isForwardRef=function(e){return b(e)===l},$e.isFragment=function(e){return b(e)===r},$e.isLazy=function(e){return b(e)===p},$e.isMemo=function(e){return b(e)===h},$e.isPortal=function(e){return b(e)===n},$e.isProfiler=function(e){return b(e)===i},$e.isStrictMode=function(e){return b(e)===o},$e.isSuspense=function(e){return b(e)===d},$e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===u||e===i||e===o||e===d||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===h||e.$$typeof===s||e.$$typeof===a||e.$$typeof===l||e.$$typeof===g||e.$$typeof===y||e.$$typeof===m||e.$$typeof===v)},$e.typeOf=b,$e}():(qe||(qe=1,"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,v=e?Symbol.for("react.block"):60121,g=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,m=e?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var f=e.$$typeof;switch(f){case t:var v=e.type;switch(v){case c:case u:case r:case i:case o:case d:return v;default:var g=v&&v.$$typeof;switch(g){case a:case l:case p:case h:case s:return g;default:return f}}case n:return f}}}var S=u,w=a,j=s,E=t,_=l,P=r,O=p,M=h,C=n,D=i,R=o,k=d,T=!1;function H(e){return b(e)===u}rt.AsyncMode=c,rt.ConcurrentMode=S,rt.ContextConsumer=w,rt.ContextProvider=j,rt.Element=E,rt.ForwardRef=_,rt.Fragment=P,rt.Lazy=O,rt.Memo=M,rt.Portal=C,rt.Profiler=D,rt.StrictMode=R,rt.Suspense=k,rt.isAsyncMode=function(e){return T||(T=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),H(e)||b(e)===c},rt.isConcurrentMode=H,rt.isContextConsumer=function(e){return b(e)===a},rt.isContextProvider=function(e){return b(e)===s},rt.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},rt.isForwardRef=function(e){return b(e)===l},rt.isFragment=function(e){return b(e)===r},rt.isLazy=function(e){return b(e)===p},rt.isMemo=function(e){return b(e)===h},rt.isPortal=function(e){return b(e)===n},rt.isProfiler=function(e){return b(e)===i},rt.isStrictMode=function(e){return b(e)===o},rt.isSuspense=function(e){return b(e)===d},rt.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===u||e===i||e===o||e===d||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===h||e.$$typeof===s||e.$$typeof===a||e.$$typeof===l||e.$$typeof===g||e.$$typeof===y||e.$$typeof===m||e.$$typeof===v)},rt.typeOf=b}()),rt)),Ue}function it(){return Je?Ve:(Je=1,Ve=function(e){return null!==e&&"object"==typeof e})}function st(){if(We)return Qe;We=1;var e=function(){if(xe)return ze;xe=1;var e,t=Ae();try{e=ot().isElement}catch(e){}return e||(e=function(e){return!!e&&t("$$typeof",e)}),ze=e}(),t=function(){if(Fe)return Be;Fe=1;var e,t=Ae();try{e=ot().isValidElementType}catch(e){}return e||(e=function(e){return"string"==typeof e||"function"==typeof e||!!e&&t("$$typeof",e)}),Be=e}(),n=it();return Qe=function(r){if(!n(r))return!1;var o=Object.getPrototypeOf(r);if(null===o)return!0;if(o!==Object.prototype)return!1;if(e(r)||t(r))return!1;return!0}}function at(){if(et)return Ye;et=1;var e=Ke?Xe:(Ke=1,Xe=function(e){return!!e&&Array.isArray(e)});return Ye=function(){for(var t=arguments.length,n=new Array(t),r=0;t>r;r++)n[r]=arguments[r];return e(n[0])?Object.assign.apply(Object,[[]].concat(n)):Object.assign.apply(Object,[{}].concat(n))},Ye}var ct=function(){if(nt)return tt;nt=1;var e=He(),t=st(),n=function(){if(Ge)return Ze;Ge=1;var e=it();return Ze=function(t){return e(t)?Object.keys(t):[]}}(),r=at();return tt=e(2,(function e(){for(var o=r((arguments.length>0?arguments[0]:void 0)||{}),i=1;arguments.length>i;i++){var s=0>i||i>=arguments.length?void 0:arguments[i];if(s)for(var a=n(s),c=0;a.length>c;c++){var u=a[c],l=s[u],d=o[u];o[u]=t(d)&&t(l)?e(d,l):l}}return o})),tt}(),ut=function(e,t){return(ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function lt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ut(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var dt=function(){return(dt=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ft(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function ht(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&o[3]>i[1])){s.label=i[1];break}if(6===i[0]&&o[1]>s.label){s.label=o[1],o=i;break}if(o&&o[2]>s.label){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function pt(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;i>o;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}var vt=function(){var e=0;return function(){return{clientEventTimestamp:Date.now(),clientUploadTimestamp:Date.now(),sequence:++e,uuid:Re()}}},gt=function(){function e(){this.listeners=Object.create(null)}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((function(e){return e!==t})))},e.prototype.emit=function(e){for(var t=[],n=1;arguments.length>n;n++)t[n-1]=arguments[n];var r=this.listeners[e];if(r)for(var o=0,i=r;i.length>o;o++){i[o].apply(void 0,t)}},e}(),yt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0,mt=yt.document,bt=yt.window,St=yt.navigator,wt=yt.XMLHttpRequest,jt=new(function(){function e(){this.isCookieAvailable=null,this.hasSamesiteNoneSupport=null,this.localState=Object.create(null)}return e.prototype.checkCookieAvailability=function(){if(null!=this.isCookieAvailable)return this.isCookieAvailable;if(null==mt.cookie)return this.isCookieAvailable=!1,this.isCookieAvailable;var e="test_cookie_sqJPwCiceI";mt.cookie="".concat(e,"=true");var t=this.getCookie(e);return this.isCookieAvailable="true"===t,mt.cookie="".concat(e,"=; expires=").concat(new Date(0).toUTCString()),this.isCookieAvailable},e.prototype.checkSamesiteNoneSupport=function(){if(null!=this.hasSamesiteNoneSupport)return this.hasSamesiteNoneSupport;if(!this.checkCookieAvailability())return this.hasSamesiteNoneSupport=!1,this.hasSamesiteNoneSupport;var e="test_cookie_yIKsyPp4Fh";mt.cookie="".concat(e,"=true; samesite=none; secure");var t=this.getCookie(e);return this.hasSamesiteNoneSupport="true"===t,mt.cookie="".concat(e,"=; expires=").concat(new Date(0).toUTCString()),this.hasSamesiteNoneSupport},e.prototype.trimSubdomains=function(e){return e.split(".").slice(-2).join(".")},e.prototype.getCookie=function(e){return mt.cookie.split("; ").reduce((function(t,n){var r=n.split("=");return r[0]===e?decodeURIComponent(r[1]):t}),"")||null},e.prototype.setCookie=function(e,t,n){var r=[],o=null!=n?n:new Date(Date.now()+15768e7).toUTCString();return r.push("".concat(e,"=").concat(encodeURIComponent(t)),"path=/","domain=".concat(this.trimSubdomains(bt.location.hostname)),"expires=".concat(o)),this.checkSamesiteNoneSupport()&&r.push("samesite=none","secure"),mt.cookie=r.join("; "),t},e.prototype.removeCookie=function(e){null!==this.getCookie(e)&&this.setCookie(e,"",new Date(0).toUTCString())},e.prototype.getLocalState=function(e){return this.localState[e]||null},e.prototype.setLocalState=function(e,t){return this.localState[e]=t.toString(),t},e.prototype.removeLocalState=function(e){e in this.localState&&delete this.localState[e]},e.prototype.get=function(e){return this.checkCookieAvailability()?this.getCookie(e):this.getLocalState(e)},e.prototype.set=function(e,t,n){return this.checkCookieAvailability()?this.setCookie(e,t,n):this.setLocalState(e,t)},e.prototype.remove=function(e){this.checkCookieAvailability()?this.removeCookie(e):this.removeLocalState(e)},e}()),Et=/^[0-9a-f]{32}$/i,_t=function(e){return"function"==typeof e?e():e},Pt={test:atob("aHR0cHM6Ly9hcGktc3RhdGlzdC5kZXYtdGNzZ3JvdXAuaW8="),prod:"https://api-statist.tinkoff.ru"},Ot=function(e){try{return bt.localStorage.getItem(e)}catch(e){return null}},Mt=function(){var e=Ot("__statist_saved_messages");if(null===e)return[];try{return JSON.parse(e)}catch(e){return[]}},Ct=function(){return function(e){try{return bt.localStorage.removeItem("__statist_saved_messages"),!0}catch(e){return!1}}()},Dt=function(){function e(e,t){var n,r=this;this.timer=null,this.eventEmitter=new gt,this.destroy=function(){bt.removeEventListener("visibilitychange",r.handleVisibilityChange),bt.removeEventListener("pagehide",r.handlePageHide)},this.handleVisibilityChange=function(){"hidden"===mt.visibilityState?r.sendByBeacon():r.processSavedMessages()},this.handlePageHide=function(){r.sendByBeacon()},this.pushEventsUrl="".concat(e,"/gateway/v1/events"),this.batchSize=t.batchSize,this.pushInterval=t.pushInterval,this.pushTimeout=null!==(n=t.pushTimeout)&&void 0!==n?n:t.pushInterval,this.savedMessagesSize=t.savedMessagesSize,this.eventsJsonSizeLimit=t.eventsJsonSizeLimit,this.gzipDisabled=!("true"===Ot("_statist_enable_gzip")),"visibilityState"in mt&&bt.addEventListener("visibilitychange",this.handleVisibilityChange,!1),bt.addEventListener("pagehide",this.handlePageHide,!1),this.events=this.excludeOutdatedMessages(Mt()),this.sequence=this.getMaxSequence(this.events),this.events.length>0&&(Ct(),this.startPush())}return e.prototype.handleApiError=function(e){var t,n,r=this;if(200>e.status||e.status>=500)return this.saveMessages(e.events),void this.startPush();if(e.response)try{var o=JSON.parse(e.response);if(o.message&&(null===(t=o.details)||void 0===t?void 0:t.errors))return void o.details.errors.forEach((function(t){t&&r.eventEmitter.emit("error",Object.assign(new Error(o.message),{status:e.status,response:t}))}))}catch(e){}this.eventEmitter.emit("error",Object.assign(new Error(null!==(n=e.response)&&void 0!==n?n:e.message),{status:e.status}))},e.prototype.saveMessages=function(e){if(0===e.length)return!0;var t=pt(pt([],Mt(),!0),e,!0);t.length>this.savedMessagesSize&&t.splice(0,t.length-this.savedMessagesSize);return function(e){try{return function(e,t){try{return bt.localStorage.setItem("__statist_saved_messages",t),!0}catch(e){return!1}}(0,JSON.stringify(e))}catch(e){return!1}}(t)},e.prototype.excludeOutdatedMessages=function(e){var t=Date.now();return e.filter((function(e){return 5184e6>t-e.eventParameters.clientEventTimestamp}))},e.prototype.processSavedMessages=function(){this.events=pt(pt([],Mt(),!0),this.events,!0),this.events.length>0&&(Ct(),this.sequence=this.getMaxSequence(this.events),this.startPush())},e.prototype.getEventsJsonSize=function(){var e=JSON.stringify(this.events);return new Blob([e]).size},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.startPush=function(){var e=this;if(0!==this.events.length){var t=function(t){return(e.isReady()?e.pushEvents(t):Promise.resolve()).then((function(){e.timer=null,e.startPush()}),(function(t){e.timer=null,e.handleApiError(t)}))};this.getEventsJsonSize()<this.eventsJsonSizeLimit?this.timer||(this.timer=setTimeout((function(){return t(e.batchSize)}),this.pushInterval)):t(this.events.length)}},e.prototype.pushEvents=function(e){return ft(this,void 0,void 0,(function(){var t;return ht(this,(function(n){return t=this.events.splice(0,e),[2,this.sendByXhr(t)]}))}))},e.prototype.updateTimestamp=function(e){for(var t=Date.now(),n=0,r=e;r.length>n;n++)r[n].eventParameters.clientUploadTimestamp=t},e.prototype.updateSequence=function(e){e.eventParameters.sequence=++this.sequence},e.prototype.getMaxSequence=function(e){var t=0;return e.forEach((function(e){var n=e.eventParameters.sequence;n>t&&(t=n)})),t},e.prototype.sendByXhr=function(e){var t=this;return wt?e.length?(this.updateTimestamp(e),new Promise((function(n,r){var o=new wt,i=function(){if(o.status<200||204<o.status){var t=Object.assign(new Error(o.responseText),{status:o.status,response:o.responseText,events:e});r(t)}else n()};o.onerror=i,o.onload=i,o.timeout=t.pushTimeout;var s=JSON.stringify(e);t.gzipDisabled?t.sendEventsJSON(s,o):t.sendEventsGZip(s,o)}))):Promise.resolve():Promise.reject()},e.prototype.sendEventsJSON=function(e,t){t.open("POST",this.pushEventsUrl,!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(e)},e.prototype.sendEventsGZip=function(e,t){var n=this;(function(e){return ft(void 0,void 0,void 0,(function(){return ht(this,(function(t){return[2,Promise.resolve().then((function(){return new Blob([e],{type:"application/json"}).stream().pipeThrough(new bt.CompressionStream("gzip"))})).then((function(e){return new Response(e)})).then((function(e){return e.blob()}))]}))}))})(e).then((function(e){try{t.open("POST",n.pushEventsUrl,!0),t.setRequestHeader("Content-Type","application/gzip"),t.setRequestHeader("Content-Encoding","gzip"),t.send(e)}catch(e){}})).catch((function(){n.sendEventsJSON(e,t)}))},e.prototype.sendByBeacon=function(){var e=this.events;this.events=[],e.length&&(St.onLine?(this.updateTimestamp(e),St.sendBeacon(this.pushEventsUrl,JSON.stringify(e))||this.saveMessages(e)):this.saveMessages(e))},e.prototype.forceSend=function(){this.sendByBeacon()},e.prototype.send=function(e){this.updateSequence(e),this.events.push(e),this.startPush()},e.prototype.isReady=function(){return!0},e}(),Rt=function(){function e(e,t,n,r){void 0===r&&(r=18e5),this.clientParameters=e,this.transport=t,this.eventParameters=n,this.sessionTimeout=r,this.deviceId=function(){var e=function(){var e=jt.get("__P__wuid");return e&&Et.test(e)?e:null}();return e||(e=function(e){var t="";if("undefined"!=typeof crypto){var n=Math.ceil(16),r=new Uint8Array(n);crypto.getRandomValues(r),r.forEach((function(e){t+=e.toString(16).padStart(2,"0")}))}else for(var o=0;32>o;o++)t+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return t.substring(0,32)}(),jt.set("__P__wuid",e)),function(e){jt.get("stDeIdU")!==e&&jt.set("stDeIdU",e)}(e),e}(),this.screenWidth=bt.screen.width,this.screenHeight=bt.screen.height,this.codegenVersion="",this.eventEmitter=new gt}return e.createTransport=function(e){var t=e.transportOptions||{},n=t.batchSize,r=void 0===n?500:n,o=t.pushInterval,i=void 0===o?15e3:o,s=t.pushTimeout,a=void 0===s?3e4:s,c=t.savedMessagesSize,u=void 0===c?1e3:c,l=t.eventsJsonSizeLimit,d=void 0===l?38400:l,f=t.endpointUrl,h=void 0===f?Pt[e.environment||"prod"]:f,p=t.gzip,v=void 0===p||p,g=yt._statistTransports||(yt._statistTransports={});yt._statistTransport&&!g[Pt.prod]&&(g[Pt.prod]=yt._statistTransport),yt._statistDevTransport&&!g[Pt.test]&&(g[Pt.test]=yt._statistDevTransport);var y=g[h];if(y)return y;var m=new Dt(h,{batchSize:r,pushInterval:i,pushTimeout:a,preconnect:!1,savedMessagesSize:u,eventsJsonSizeLimit:d,gzip:v});return g[h]=m,h===Pt.prod?yt._statistTransport=m:h===Pt.test&&(yt._statistDevTransport=m),m},e.prototype.getSessionId=function(){var e=jt.get("vIdUid"),t=Number(jt.get("stLaEvTi"))||null;if(null!==e&&null!==t&&Date.now()-t<this.sessionTimeout)return e;var n=jt.set("vIdUid",Re());return jt.remove("stLaEvTi"),jt.remove("stSeStTi"),n},e.prototype.getSessionStartTime=function(){return null===jt.get("stSeStTi")?Date.now():Number(jt.get("stSeStTi"))},e.prototype.resolveClientParameters=function(e){return dt(dt({},null!=e?e:this.clientParameters),{sessionId:this.getSessionId(),deviceId:this.deviceId,sessionStartTime:this.getSessionStartTime(),screenWidth:this.screenWidth,screenHeight:this.screenHeight,sdkVersion:"0.4.64",codegenVersion:this.codegenVersion})},e.prototype.transportSend=function(e){this.transport.send(e),jt.set("stLaEvTi",Date.now()),null===jt.get("stSeStTi")&&jt.set("stSeStTi",e.clientParameters.sessionStartTime)},e.prototype.sendUserProperties=function(e,t,n,r){var o,i,s=((o={kind:"userProperties",project:e,eventParameters:_t(this.eventParameters),clientParameters:this.resolveClientParameters()})[n]=((i={})["$".concat(t)]=r,i),o);this.transportSend(s),this.eventEmitter.emit("message",{type:"userProperties",message:s})},e.prototype.send=function(e,t,n,r){var o={project:e,name:t,parameters:n,eventParameters:_t(this.eventParameters),clientParameters:this.resolveClientParameters(r)};this.transportSend(o),this.eventEmitter.emit("message",{type:"event",message:o})},e.prototype.updateClientParameters=function(e){for(var t in e)this.clientParameters[t]=e[t]},e.prototype.updateUserProperties=function(e,t,n){this.sendUserProperties(e,t,"userProperties",null!=n?n:{})},e.prototype.updateFeatureFlags=function(e,t){this.sendUserProperties(e,"set","featureFlags",null!=t?t:{})},e.prototype.updateABGroups=function(e,t){this.sendUserProperties(e,"set","ABGroups",null!=t?t:{})},e.prototype.on=function(e,t){"message"===e?this.eventEmitter.on(e,t):this.transport.on(e,t)},e.prototype.off=function(e,t){"message"===e?this.eventEmitter.off(e,t):this.transport.off(e,t)},e.prototype.forceSend=function(){var e,t;null===(t=(e=this.transport).forceSend)||void 0===t||t.call(e)},e.prototype._setCodegenVersion=function(e){this.codegenVersion=e},e}(),kt=function(e){return yt._statistClientInitOptions?ct(e,yt._statistClientInitOptions):e},Tt=function(e){function t(t){var n=kt(t);return e.call(this,n.clientParameters,Rt.createTransport(n),n.eventParameters||vt(),n.sessionTimeout)||this}return lt(t,e),t.prototype.send=function(t,n,r,o){return e.prototype.send.call(this,t,n,r||{},o)},t}(Rt);!function(e){function t(t){var n=kt(t);return e.call(this,n.clientParameters,Rt.createTransport(t),n.eventParameters||vt(),n.sessionTimeout)||this}lt(t,e),t.prototype.send=function(t,n,r,o){return e.prototype.send.call(this,t,n,r,o)}}(Rt);var Ht,At={};var It,Ut,Lt=(Ht||(Ht=1,Object.defineProperty(At,"__esModule",{value:!0}),At.getTracking=void 0,At.getTracking=function(){if("undefined"==typeof window)throw new Error("EClientOnly");return new Promise((function(e){var t=window.tracking;t&&t.fullfill?t.trackingReady?t.trackingReady().then(e):e(t):window.addEventListener("tracking-created",(function(t){t instanceof CustomEvent&&e(t.detail||window.tracking)}))}))}),At);var $t=(Ut||(Ut=1,It=function(e){var t,n=!1;return function(){return n||(t=e.apply(void 0,arguments),n=!0),t}}),It);const qt=$t((()=>{var e;let t;if(document.currentScript){t=new URL((null===(e=document.currentScript)||void 0===e?void 0:e.getAttribute("src"))||"").searchParams}return t}));new RegExp(`[${Object.keys({"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"}).join("")}]`,"g");const Nt=(e,t,n)=>{try{return JSON.stringify(e,t,n)}catch(r){return((e,t,n)=>{const r=new Set,o=t||(e=>e);return JSON.stringify(e,((e,t)=>t&&"object"==typeof t?r.has(t)?"[~Circular~]":(r.add(t),o(t)):o(t)),n)})(e,t,n)}};var zt,xt,Bt,Ft,Vt,Jt,Qt,Wt;!function(){if(xt)return zt;xt=1;var e=He();zt=e(3,(function(e,t,n){void 0===n&&(n=[]);for(var r=n.length,o=0;r>o;o++)t=e(t,n[o],o,n);return t}))}();var Zt=function(){if(Wt)return Qt;Wt=1;var e=function(){if(Ft)return Bt;Ft=1;var e=/([a-z])([A-Z])/g,t=/[^a-zA-Z]+/g;return Bt=function(n){return n.replace(e,(function(e,t,n){return t+" "+n})).split(t)}}(),t=Jt?Vt:(Jt=1,Vt=function(e){return""+e.charAt(0).toUpperCase()+e.slice(1)});return Qt=function(n){return e(n).map((function(e,n){return 0===n?e.toLowerCase():t(e.toLowerCase())})).join("")}}();const Gt=(e,t)=>t instanceof Error?Object.assign({message:t.message,stack:t.stack},t):t;class Xt{constructor(e,t="all"){this.log=(e,t)=>{window.logger[this.loggerStorageName][e](Object.assign(Object.assign({},t),{name:this.loggerName}))},this.info=e=>this.log("info",e),this.warn=e=>this.log("warn",e),this.error=e=>this.log("error",e),this.fatal=e=>this.log("fatal",e),this.trace=e=>this.log("trace",e),this.debug=e=>this.log("dedug",e),this.loggerName=t,this.loggerStorageName=Zt(t),window.logger||(window.logger={}),window.logger[this.loggerStorageName]=e}}const Kt=(()=>{const e=Object.create(null);return{useEvent:({project:t,event:n})=>{e[t]||(e[t]=Object.create(null)),e[t][n]=!0},getUsedEvents:()=>Object.keys(e).map((t=>({projectName:t,eventList:Object.keys(e[t])})))}})();window.addEventListener("beforeunload",(()=>{const e=Kt.getUsedEvents();e.length&&e.forEach((({projectName:e,eventList:t})=>{cn.sendOnce({project:"eventea",event:"usage-stats",payload:{projectName:e,eventList:t}},e)}))}));const Yt=(()=>{const e=new Set,t=qt();if(t)for(const[n,r]of t)"project"===n&&e.add(r);return[...e]})(),en=new Q.ClientLoader({preloadProjects:Yt,baseUrl:"https://acdn.tinkoff.ru/eventea/"}),tn=new class{constructor(e){this.sendLog=({logApi:e,payload:t})=>fetch(`${e}collect`,{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:Nt(t,Gt)}).catch((e=>e)),this.send=e=>{this.sendLog({logApi:this.apiURL,payload:e})},this.log=(e,t)=>{this.send(Object.assign(Object.assign({},t),{level:e}))},this.error=e=>this.log("error",e),this.info=e=>this.log("info",e),this.warn=e=>this.log("warn",e),this.fatal=e=>this.log("fatal",e),this.debug=e=>this.log("debug",e),this.trace=e=>this.log("trace",e),this.apiURL=e}}("https://www.tinkoff.ru/api/front/log/"),nn=new Xt(tn,"eventea-logger-tracking"),rn=new Xt(tn,"eventea-error-handlers"),on=new Xt(tn,"eventea-logger"),sn=new Tt((()=>{const e=qt(),t={clientParameters:{ssoId:null}},n=null==e?void 0:e.get("statist-environment");n&&(t.environment=n);const r=null==e?void 0:e.get("statist-client");r&&(t.clientParameters.client=r);const o=null==e?void 0:e.get("statist-client-version");return o&&(t.clientParameters.clientVersion=o),t})()),an={projectConfigurationMap:{},errorHandlers:(({logger:e})=>({handleMissedEvent:({event:t,project:n})=>{e.error({event:"eventea-missed-event",project:n,eventName:t})},handleMissedEventHandler:({event:t,routeHandlerName:n,project:r})=>{e.error({event:"eventea-missed-event-handler",eventName:t,project:r,routeHandlerName:n})},handleMissedProject:({event:t,project:n})=>{e.error({event:"eventea-missed-project",project:n,eventName:t})},handleMissedRouting:({project:t})=>{e.error({event:"eventea-missed-routing",project:t})},handleMissedDataHandler:({project:t,handlerName:n})=>{e.error({event:"eventea-missed-data-handler",project:t,handlerName:n})},handleMissedDataProject:({project:t})=>{e.error({event:"eventea-missed-data-project",project:t})},handleMissedRoutes:({project:t,event:n})=>{e.error({event:"eventea-missed-routes",project:t,eventName:n})},handleDeprecatedEvent:({project:t,event:n})=>{e.info({event:"eventea-deprecated-event",project:t,eventName:n})},handleEventHandlerError:(t,n,{project:r,event:o})=>{e.error({event:"eventea-handler-error",project:r,eventName:o,handlerName:n,error:t})}}))({logger:rn}),routingClientLoader:en,beerBaseUrl:"https://www.tinkoff.ru/api/front/eventea-beer/",handleAnyEvent:e=>{Kt.useEvent(e)},defaultEventHandlers:{statist:ue.statistHandlerFactory({statistClient:sn}),tracking:(({logger:e})=>{const t=$t((()=>((e=6e3)=>Promise.race([Lt.getTracking(),new Promise(((t,n)=>setTimeout((()=>n(new Error(`No tracking after ${e}ms timeout`))),e)))]))().then((e=>e.callUtil("makeEventeaHandler"))).catch((t=>(e.error({event:"Unable to resolve makeEventeaHandler.",error:t}),null)))));return e=>{t().then((t=>{null==t||t(e)}))}})({logger:nn}),logs:(({logger:e})=>t=>{var{project:n,event:r,payload:o,handlersData:i}=t,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);r.length>o;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["project","event","payload","handlersData"]);const a=null==s?void 0:s.config,c=(()=>{const e=qt();let t="unknown";if(e)for(const[n,r]of e)if("appName"===n){t=r;break}return t})();if(a){const{level:t,samplingRate:s=1}=a;if(W[t]&&t in e){if(0===(u=s)||1===u?u:Math.random()<=u){const s=i?Object.assign(Object.assign({},i),{statist:void 0}):i;e[t]({event:r,eventeaProject:n,payload:o,appName:c,handlersData:s,from:"browser",userAgent:window.navigator.userAgent,href:window.location.href})}return}e.error({event:"eventea-wrong-logs-config",originalEvent:r,originalLevel:t})}var u})({logger:on})}},cn=new T.RootEventea(an);"undefined"!=typeof window&&(window.eventea=cn,window.eventeaStatist=sn,window.__eventea=cn)}();
