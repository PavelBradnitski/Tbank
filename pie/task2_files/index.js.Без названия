(function(){var TTM_INSTALLER_PARAMS={"account":"tinkoff-pwa","container":"edu","hash":"9503486f-23c6-43b9-aefd-2f36bec3efbd","storageRoot":"twa/ttm","env":"prod","versionNumber":13};(function(){try{n=((o=document.currentScript)===null||o===void 0?void 0:o.getAttribute("src"))||"",TTM_INSTALLER_PARAMS.storageHost=new URL(n).origin,TTM_INSTALLER_PARAMS.storageHostIssue=!1}catch(l){TTM_INSTALLER_PARAMS.storageHostIssue=!0,TTM_INSTALLER_PARAMS.storageHost="https://acdn.tinkoff.ru"}var o,n,s="".concat(TTM_INSTALLER_PARAMS.storageHost,"/").concat(TTM_INSTALLER_PARAMS.storageRoot,"/polyfills/polyfills-v1.js"),e=!1,r=function(){(function(){var y="ttm",I="_ttm",m={INFO:"info",STORAGE_HOST:"storageHost",LOGGER:"logger",BUILD_ENTITIES:"buildEntities"};var E="_",L="ttmBuild",p={PUBLICATIONS:"publications",PROD_BUILDS:"builds",ENVIRONMENTS:"environments"};var D=function(n,o){var e,a,r,i;return(i=(a=(e=n.split(o)[1])===null||e===void 0?void 0:e.split("="))===null||a===void 0||(r=a[1])===null||r===void 0?void 0:r.split("&"))===null||i===void 0?void 0:i[0]},B=function(n){var o=D(n,L);if(!o)return null;var e=o.split(E);if(e.length!==3&&e.length!==4)return null;var a=e[0],r=e[1],i=e[2],t=e.length===4?e[3]:null;return{hash:a,container:i,env:t,account:r}},R=function(n){var o=n.account,e=n.container,a=n.hash,r=n.storageRoot,i=n.storageHost,t=B(window.location.search);if(!t)return a===null?{src:null,buildId:null}:{src:"".concat(i,"/").concat(r,"/").concat(o,"/").concat(p.PROD_BUILDS,"/").concat(e,"/").concat(a,"/ttm.js"),buildId:"".concat(o,"/").concat(e,"/").concat(a)};var s;return t.env===null?s="".concat(i,"/").concat(r,"/").concat(t.account,"/").concat(p.PROD_BUILDS,"/").concat(t.container,"/").concat(t.hash,"/ttm.js"):s="".concat(i,"/").concat(r,"/").concat(t.account,"/").concat(p.ENVIRONMENTS,"/").concat(t.env,"/").concat(t.container,"/").concat(t.hash,"/ttm.js"),{src:s,buildId:"".concat(t.env?"".concat(t.env,":"):"").concat(t.account,"/").concat(t.container,"/").concat(t.hash)}};var w=function(n,o){window.addEventListener("error",function(e){try{if(typeof e!="object"||!e)return;var a=e.error,r=e.filename,i=e.lineno,t=e.colno,s=e.message;(typeof r=="string"&&r&&r.includes(n)||a&&typeof a=="object"&&typeof a.stack=="string"&&a.stack.includes(n))&&o.error({message:s,lineno:i,colno:t},"unhandled-error")}catch(l){}}),window.addEventListener("unhandledrejection",function(e){try{if(!e||typeof e!="object"||!e.reason||typeof e.reason!="object")return;var a=e.reason.stack;typeof a=="string"&&a.includes(n)&&o.error(e.reason,"unhandled-rejection")}catch(r){}})};var A=function(n){try{return typeof window=="undefined"||!window.localStorage||typeof window.localStorage.getItem!="function"?null:window.localStorage.getItem(n)}catch(o){return null}},M=function(n){return new Promise(function(o,e){var a=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.src=n,r.crossOrigin="anonymous",a.appendChild(r),r.onload=function(){return o(r)},r.onerror=function(){return e(new Error("Error when loading ".concat(n," script")))}})};function C(n,o){return o!=null&&typeof Symbol!="undefined"&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](n):n instanceof o}var h=function(n){try{return JSON.stringify(n)}catch(o){return"Stringify error while log try"}},P=function(n){return C(n,Error)?{message:n.message,name:n.name,stack:n.stack}:n},O=function(n){return n&&typeof n=="object"&&"message"in n?n.message:null};function U(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}var v=function n(o,e,a){"use strict";var r=this;U(this,n),this.account=o,this.container=e,this.buildId=a,this.loggerUrl="https://www.tinkoff.ru/api/front/log/collect",this.loggerLocalStorageFlagName="_ttm_logger_",this.sendErrorProbability=1,this.sendDataProbability=.01,this.errorsLimit=20,this.errorsByTypes={},this.messageTypeColorMap={error:"red",info:"lightgray",data:"darkblue"},this.stdout=function(i,t,s){try{if(!A(r.loggerLocalStorageFlagName))return;console.log("%c%s","background-color: ".concat(r.messageTypeColorMap[i],"; color: white; padding: 2px 5px; border-radius: 5px; font-weight: 600; font-size: 12px;"),"TTM:".concat(i).concat(s?":".concat(s):""),t)}catch(l){}},this.sendLog=function(i,t,s){Math.random()>i||fetch(r.loggerUrl,{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:h({system:"ttm",appName:"ttm",component:"ttm",level:t,from:"browser",ttmInfo:{account:r.account,container:r.container,buildId:r.buildId,session:r.session},ttmData:s})}).catch(function(){return null})},this.error=function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"runtime-error";try{if(r.stdout("error",i,t),r.errorsByTypes[t]||(r.errorsByTypes[t]=0),r.errorsByTypes[t]+=1,r.errorsByTypes[t]===r.errorsLimit){var s={type:t,errorLimit:r.errorsLimit};r.stdout("data",s,"error-limit-exceeded"),r.sendLog(1,"info",{type:"error-limit-exceeded",data:h(s)})}if(r.errorsByTypes[t]>=r.errorsLimit)return;r.sendLog(r.sendErrorProbability,"error",{type:t,message:O(i),data:h(P(i))})}catch(l){}},this.data=function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"data";try{r.stdout("data",i,t),r.sendLog(r.sendDataProbability,"info",{type:t,data:h(i)})}catch(s){}},this.info=function(i){r.stdout("info",i)},this.session="ttm-".concat(Date.now(),"-").concat(Math.round(Math.random()*1e5))};function x(n,o,e,a,r,i,t){try{var s=n[i](t),l=s.value}catch(c){e(c);return}s.done?o(l):Promise.resolve(l).then(a,r)}function G(n){return function(){var o=this,e=arguments;return new Promise(function(a,r){var i=n.apply(o,e);function t(l){x(i,a,r,t,s,"next",l)}function s(l){x(i,a,r,t,s,"throw",l)}t(void 0)})}}function b(n,o,e){return o in n?Object.defineProperty(n,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[o]=e,n}var j=function(n,o){var e,a,r,i,t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(u){return l([c,u])}}function l(c){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,a&&(r=c[0]&2?a.return:c[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;switch(a=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,a=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){t.label=c[1];break}if(c[0]===6&&t.label<r[1]){t.label=r[1],r=c;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(c);break}r[2]&&t.ops.pop(),t.trys.pop();continue}c=o.call(n,t)}catch(u){c=[6,u],a=0}finally{e=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},N=function(){var n=G(function(){var o,e,a,r,i,t,s,l,c,u,T,S,f,d,_;return j(this,function(g){switch(g.label){case 0:o="",e="",a="",r="",i="",t=null,s="",l=!1;try{if(o=TTM_INSTALLER_PARAMS.account,e=TTM_INSTALLER_PARAMS.container,a=TTM_INSTALLER_PARAMS.storageRoot,t=TTM_INSTALLER_PARAMS.versionNumber,s=TTM_INSTALLER_PARAMS.storageHost,l=TTM_INSTALLER_PARAMS.storageHostIssue,c=R(TTM_INSTALLER_PARAMS),u=c.src,T=c.buildId,u==null||T===null)return S=new v(o,e,"no-build"),S.info("".concat(o,"/").concat(e," has no published build")),[2];r=u,i=T}catch(H){}if(f=new v(o,e,i),f.data({},"ttm-installer-loaded"),!o||!e||!i||!s)return f.error({message:"Empty build data"},"installation-error"),[2];window[y]=window[y]||[],window[I]=(d={},b(d,m.INFO,{buildId:i,account:o,container:e,versionNumber:t}),b(d,m.STORAGE_HOST,s),b(d,m.LOGGER,f),d),w("".concat(s,"/").concat(a),f),l&&f.error({message:"storage-host-issue"},"storage-host-issue"),g.label=1;case 1:return g.trys.push([1,3,,4]),[4,M(r)];case 2:return g.sent(),[3,4];case 3:return _=g.sent(),f.error(_,"loading-error"),[3,4];case 4:return[2]}})});return function(){return n.apply(this,arguments)}}();N();})();};try{e=!window.Promise.prototype.finally||!window.URL||!window.URLSearchParams||!window.AbortController||!Object.fromEntries||!Object.entries}catch(l){e=!0}e?(a=document.getElementsByTagName("head")[0],t=document.createElement("script"),t.type="text/javascript",t.src=s,t.crossOrigin="anonymous",t.onload=r,t.onerror=function(){return null},a.appendChild(t)):r();var a,t;})();})()