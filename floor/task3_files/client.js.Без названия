!function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function n(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);r.length>o;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function r(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&o[3]>i[1])){a.label=i[1];break}if(6===i[0]&&o[1]>a.label){a.label=o[1],o=i;break}if(o&&o[2]>a.label){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function i(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;i>o;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var a=function(){function e(e){void 0===e&&(e={}),this.services={},this._env="u"===(typeof window)[0]?"server":"client";for(var t=0,n=Object.keys(e);n.length>t;t++){var r=n[t];this.bind(r,e[r])}}return Object.defineProperty(e.prototype,"env",{get:function(){return this._env},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this.get("location")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cookies",{get:function(){if(this._cookiesPubl)return this._cookiesPubl;var e,n,r,o,i=this.services.cookies;if(!i)throw new Error("No cookies service");return this._cookiesPubl=(e=i,n=this.get("consentVault"),r={},o=function(t,n,r){var o,i;e.set(t.name,n,null!==(o=t.expires)&&void 0!==o?o:r.expires,null!==(i=t.subdomains)&&void 0!==i?i:r.subdomains)},n.on("update",(function(){for(var e=0,t=Object.keys(r);t.length>e;e++){var i=t[e],a=r[i],s=a.cookie,u=a.value,c=a.opts;n.isAllowed(s.category)&&(o(s,u,c),delete r[i])}})),t(t({},e),{set:function(e,t,i){void 0===i&&(i={});var a=n.isAllowed(e.category);return a?o(e,t,i):r[e.name]={cookie:e,value:t,opts:i},a},remove:function(t,n){delete r[t],e.remove(t,n)}})),this._cookiesPubl},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=this.services[e];if(void 0!==t)return t;throw new Error("No service "+e)},e.prototype.getOr=function(e,t){var n=this.services[e];return void 0!==n?n:t},e.prototype.bind=function(e,t){this.services[e]=t},e}();var s={tapi:function(e,n,r){void 0===r&&(r={});var o=e.get("request"),i=e.get("config");return i.api?o(""+i.api+n,t({},r)).then((function(e){return e.json()})):Promise.reject("config.api is not configured")},configApi:function(e,n,r){void 0===r&&(r={});var o=e.get("config").configApi;return e.get("request")(""+o+n,t({},r)).then((function(e){return e.json()}))}},u=function(){function e(e){this.clear=this.getSafeVersionOfMethod("clear",void 0),this.key=this.getSafeVersionOfMethod("key",null),this.setItem=this.getSafeVersionOfMethod("setItem",void 0),this.getItem=this.getSafeVersionOfMethod("getItem",null),this.removeItem=this.getSafeVersionOfMethod("removeItem",void 0),this.storageType=e}return Object.defineProperty(e.prototype,"length",{get:function(){try{return this.storage.length}catch(e){}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){if(!this.storageImpl){var e={local:localStorage,session:sessionStorage};this.storageImpl=e[this.storageType]}return this.storageImpl},enumerable:!1,configurable:!0}),e.prototype.getSafeVersionOfMethod=function(e,t){var n=this;return function(){for(var r,o=[],i=0;arguments.length>i;i++)o[i]=arguments[i];try{return(r=n.storage)[e].apply(r,o)}catch(e){}return t}},e}(),c=new u("local"),d=new u("session"),l=function(){},f="log function is now deprecated, use logger object instead";function p(e){return{warn:e,debug:e,error:e,info:e,log:e}}var m=p(l);var v=function e(t){var n=Math.random().toString(36).slice(2);return 10>n.length?e():n},g=function(e){for(var t=[],n=0,r=Object.keys(e);r.length>n;n++){var o=r[n];e[o]&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]))}return t.length?"?"+t.join("&"):""},h=function(e){var n,r=e.url,o=e.payload,i=e.timeout,a=e.cbname,s=void 0===a?"callback":a,u="cb"+v(),c=g(t(((n={})[s]=u,n),o));return new Promise((function(e,t){var n=document.createElement("script"),o=!1;n.addEventListener("error",(function(e){o||(t(e),o=!0)})),window[u]=function(t){delete window[u],document.head.removeChild(n),o||(e(t),o=!0)},n.src=r+c,document.head.appendChild(n),i&&setTimeout((function(){o||(o=!0,t(new Error("Timeout")))}),i)}))};function y(e,t,n){void 0===t&&(t="&"),void 0===n&&(n="=");for(var r={},o=0,i=e.split(t);i.length>o;o++){var a=String(i[o]).split(n),s=a[0],u=a.slice(1);if(s){var c=u.join(n);try{c=decodeURIComponent(c)}catch(e){}r[decodeURIComponent(s)]=c}}return r}function w(e){void 0===e&&(e=document.location);var t={get query(){return y(e.search.slice(1))},get pathname(){return"/"!==e.pathname.charAt(0)?"/"+e.pathname:e.pathname}};return["hash","host","hostname","href","port","protocol","search","origin"].forEach((function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){"origin"!==n&&(e[n]=t)},enumerable:!0})})),t}function b(e){var t=document.createElement("a");return t.href=e,w(t)}var _=function(t){function n(e){var n=t.call(this,"Not success status code of request: "+e.status+" "+e.statusText)||this;return n.statusCode=e.status,n.statusText=e.statusText,n.url=e.url,n}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t),n}(Error);function k(e){if(200>e.status||e.status>=400)throw new _(e);return e}var S,E,x=function(e,r){void 0===r&&(r={});var o=r.headers,i=r.timeout,a=void 0===i?1500:i,s=r.body,u=r.method,c=void 0===u?"GET":u,d=n(r,["headers","timeout","body","method"]),l={},f={method:c,headers:l},p=function(e){if("AbortController"in window){var t=new AbortController;return setTimeout((function(){t.abort()}),e),t.signal}}(a);return p&&(f.signal=p),void 0!==s&&("string"==typeof s?f.body=s:(f.body=JSON.stringify(s),l["Content-Type"]="application/json")),Object.assign(f.headers,o),fetch(e,t(t({},f),d)).then(k).catch((function(t){throw t instanceof Error&&((null==p?void 0:p.aborted)&&(t.message="Request time exceeded "+a+"ms"),Object.assign(t,{url:e,method:c})),t}))},C=/^(?:::(?:ffff:(0:)?)?)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,I=/^([0-9a-fA-F]{1,4}:){1,4}:(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/;function P(e){return C.test(t=e)||I.test(t)?e:0>e.indexOf("localhost")?"."+e.split(".").slice(-2).join("."):"localhost";var t}!function(e){e[e.Essential=1]="Essential",e[e.Functionality=2]="Functionality",e[e.Statistics=4]="Statistics",e[e.Marketing=8]="Marketing"}(S||(S={})),function(e){e[e.PersonalDataProcessing=16]="PersonalDataProcessing"}(E||(E={}));var O,T=0xfffffffffffff;!function(e){e.AdobeAnalyticsSettings="adobe-analytics-settings"}(O||(O={}));var M,A={global:"tracking",initialState:{},utilTimeout:2e3,disableJsonp:!1},j=/^\d+(0|s|t)\d+$/,L=["internal_source"],D=5184e3,N=31536e4,q=S.Marketing|S.Statistics,U={wuid:{name:"__P__wuid",category:S.Essential,expires:N,subdomains:!0},wuidLC:{name:"__P__wuid_last_update_time",category:S.Statistics,expires:N,subdomains:!0},wuidVisitId:{name:"__P__wuid_visit_id",category:S.Statistics,expires:63072e3,subdomains:!0},wuidVisitPersistence:{name:"__P__wuid_visit_persistence",category:S.Statistics,expires:1800,subdomains:!0},dspId:{name:"dsp_click_id",category:S.Marketing,expires:D,subdomains:!0},tcpaId:{name:"tcpa_click_id",category:S.Marketing,subdomains:!0},pageLanding:{name:"pageLanding",category:S.Statistics,subdomains:!0},utmSource:{name:"utm_source",category:q,expires:D,subdomains:!0},utmContent:{name:"utm_content",category:q,expires:D,subdomains:!0},utmCampaign:{name:"utm_campaign",category:q,expires:D,subdomains:!0},utmMedium:{name:"utm_medium",category:q,expires:D,subdomains:!0},utmTerm:{name:"utm_term",category:q,expires:D,subdomains:!0},utmDateSet:{name:"utm_date_set",category:q,expires:D,subdomains:!0},sid:{name:"sid",category:q,expires:D,subdomains:!0},wm:{name:"wm",category:q,expires:D,subdomains:!0},ctxSource:{name:"ctx_source",category:q},ctxPosition:{name:"ctx_position",category:q,expires:D,subdomains:!0},ctxBlock:{name:"ctx_block",category:q,expires:D,subdomains:!0},visitorNewOrReturn:{name:"s_nr",category:q,expires:31536e3},yclid:{name:"yclid",category:S.Marketing,subdomains:!0,expires:86400},statistDeviceId:{name:"stDeIdU",category:S.Statistics,expires:N,subdomains:!0}},R="__utma",V="userType",W="psid",z="dmp.id",F=((M={})[U.pageLanding.name]=225,M[U.utmSource.name]=190,M[U.utmTerm.name]=220,M[U.utmContent.name]=4e3,M[U.utmCampaign.name]=120,M[U.utmMedium.name]=180,M[U.sid.name]=140,M[U.wm.name]=100,M.default=72,M);function B(e){var t=(("; "+document.cookie).split("; "+e+"=")[1]||"").split("; ")[0];try{return decodeURIComponent(t)}catch(e){return t}}function H(e){var t,n=e.logger,r=P(location.hostname),o=(t="test_cookie_QpHfCYJQhs",document.cookie=t+"=true; samesite=none; secure",""!==B(t));function i(e,t,i,a){var s=[];try{!function(e,t){var n=encodeURIComponent(t),r=F[e]||F.default;if(n.length>r)throw new Error("ECookieTooLarge: cookie "+e+" exceeds maximum length of "+r+" bytes")}(e,String(t))}catch(e){return void n.error(e)}s.push(e+"="+encodeURIComponent(t)),i&&"boolean"!=typeof i&&Number.isFinite(i)&&s.push("expires="+new Date(Number(new Date)+1e3*i).toUTCString()),s.push("path=/"),a&&s.push("domain="+r),o&&(s.push("samesite=none"),s.push("secure")),document.cookie=s.join("; ")}return{getAll:function(){return y(document.cookie,"; ","=")},get:B,set:i,remove:function(e,t){i(e,"",-1,t)}}}var G=function(){try{var e=new CustomEvent("a",{detail:{b:"c"}});return"a"===e.type&&"c"===e.detail.b}catch(e){}return!1}()?function(e,t){return new CustomEvent(e,t)}:function(e,t){var n=t.bubbles,r=void 0!==n&&n,o=t.cancelable,i=void 0!==o&&o,a=t.detail,s=document.createEvent("CustomEvent");return s.initCustomEvent(e,r,i,a),s};function J(e,t,n){void 0===n&&(n=document.body),n.dispatchEvent(G(e,{detail:t,bubbles:!0}))}function K(e,t){return e.get("request")(e.get("config").frontLogApi+"collect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0})}function Y(e,t){return r(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,d,l,f,p;return o(this,(function(o){switch(o.label){case 0:if(n=t.configName,i=void 0===(r=t.maxRetries)?3:r,s=void 0===(a=t.timeout)?1e4:a,u=e.get("request"),!(c=e.get("config").cdnUrl))throw new Error("cdnUrl is not provided, getRemoteConfig cannot be used");d=c+"/configs/prod/"+n+".json",f=0,o.label=1;case 1:if(i<=f)return[3,6];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,u(d,{timeout:s}).then((function(e){return e.json()}))];case 3:return[2,o.sent()];case 4:return p=o.sent(),l=p,[3,5];case 5:return f++,[3,1];case 6:throw l}}))}))}var $=function(){function e(){var e=this;this.send=function(t){e.__addEventToStore(["send",t])},this.sendOnce=function(t){return e.__addEventToStore(["sendOnce",t]),!0},this.data=function(t){e.__addEventToStore(["data",t])},window&&!window._evnteq&&(window._evnteq=[])}return e.prototype.__addEventToStore=function(){for(var e,t=[],n=0;arguments.length>n;n++)t[n]=arguments[n];(null===window||void 0===window?void 0:window._evnteq)&&(e=window._evnteq).push.apply(e,t)},e}();function Q(){var e=-1!==(c.getItem("debug")||"").indexOf("Twt:info:tracking")?console:m;return t(t({},s),{logger:e,jsonp:h,parseUrl:b,request:x,location:w(),cookies:H({logger:e}),referrer:document.referrer?b(document.referrer):void 0,event:J,collectLog:K,remoteConfig:Y,eventea:new $})}function Z(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t){var n=[].slice.call(arguments,1);(e[t]||[]).map((function(e){e.apply(void 0,n)})),(e["*"]||[]).map((function(e){e.apply(void 0,[t].concat(n))}))}}}var X=Array.prototype.slice;function ee(e){return"object"==typeof e}function te(e){if(Array.isArray(e))return e.slice();var t={};for(var n in e)t[n]=e[n];return t}function ne(e,t,n){return ee(e)&&null!==e&&t in e?e[t]:n}function re(e,t,n){var r=t[0],o=t.slice(1);return ne(e,r)&&o.length?re(e[r],o,n):ne(e,r,n)}function oe(e,t,n){return Array.isArray(t)?re(e,t,n):ne(e,t,n)}function ie(e,t,n){if(e[t]===n)return e;var r=te(e);return r[t]=n,r}function ae(e,t,n){if(re(e,t)===n)return e;var r=t[0],o=t.slice(1),i=te(e);return i[r]=o.length?ae(r in i?i[r]:{},o,n):n,i}function se(e){for(var t,n,r=arguments,o=arguments.length,i=e,a=1;o>a;a+=2)t=r[a],n=r[a+1],i=Array.isArray(t)?ae(i,t,n):ie(i,t,n);return i}function ue(e,t){if(!(t in e))return e;var n=te(e);return delete n[t],n}function ce(e,t){var n=t[0],r=t.slice(1);return r.length?n in e&&ce(e[n],r):n in e}function de(e,t){if(!ce(e,t))return e;var n=t[0],r=t.slice(1),o=te(e);return 0!==r.length?(o[n]=de(e[n],r),0===Object.keys(o[n]).length&&delete o[n]):delete o[n],o}function le(e){for(var t,n=arguments,r=arguments.length,o=0,i=e;++o<r;)t=n[o],i=Array.isArray(t)?de(i,t):ue(i,t);return i}function fe(e,t,n){var r=ne(e,t);return ie(e,t,n.apply(r,[r].concat(X.call(arguments,3))))}function pe(e,t,n){var r=re(e,t);return ae(e,t,n.apply(r,[r].concat(X.call(arguments,3))))}function me(e,t){return Array.isArray(t)?pe.apply(this,arguments):fe.apply(this,arguments)}function ve(e,t){for(var n,r,o=Object.keys(t),i=o.length,a=-1,s=e;++a<i;)s=ee(n=t[r=o[a]])&&null!==n?ie(s,r,r in s?ve(s[r],n):te(n)):ie(s,r,n);return s}function ge(e){var t=e.location.query.parent_url,n=e.get("parseUrl");if(t)return n(t)}var he=function(e,t){return function n(){for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return e>o.length?function(){for(var e=arguments.length,t=new Array(e),r=0;e>r;r++)t[r]=arguments[r];return n.apply(this,o.concat(t))}:t.apply(this,o)}},ye=function(e){return null!==e&&"object"==typeof e},we=ye,be=function(e){return we(e)?Object.keys(e):[]},_e=he(2,(function(e,t){void 0===t&&(t={});for(var n=be(t),r={},o=0;n.length>o;o++){var i=n[o];e(t[i],i,t)&&(r[i]=t[i])}return r})),ke=_e,Se=["fio","email","phone_mobile","sessionId","session_id","sessionid","token","ticket"];var Ee={name:"url",run:function(e){var n=ge(e),r=function(e){return Object.assign(e,{get safeSearch(){return g(this.safeQuery)},get safeQuery(){var t=ke((function(e){return Boolean(e)}),e.query);return Se.forEach((function(e){e in t&&(t[e]="*")})),t}})}(n||e.location);return n&&(r.frameurl=e.location.pathname),t({},r)}};function xe(e){return"string"==typeof e?e:function(e,t){if(!t)return e;var n=Object.keys(t).reduce((function(e,n){var r=t[n];return void 0===r||e.push(encodeURIComponent(n)+"="+encodeURIComponent(r)),e}),[]).join("&");if(""===n)return e;var r=e.includes("?")?"&":"?";return""+e+r+n}(e.url,e.params)}function Ce(e){return Promise.all(e.map((function(e){return e.then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}}))})))}var Ie="undefined"!=typeof window&&"undefined"!=typeof Request&&"keepalive"in new Request(""),Pe=function(e){return fetch(e,{mode:"no-cors",credentials:"include",keepalive:Ie}).catch((function(){}))};var Oe={Essential:S.Essential,Functionality:S.Functionality,Statistics:S.Statistics,Marketing:S.Marketing,PersonalDataProcessing:E.PersonalDataProcessing};function Te(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];return 0===e.length?function(e){return e}:1===e.length?e[0]:e.reduce((function(e,t){return function(){for(var n=[],r=0;arguments.length>r;r++)n[r]=arguments[r];return e(t.apply(void 0,n))}}))}var Me,Ae,je=function(e){return Object(e)===e&&Object.getPrototypeOf(e)===Object.prototype},Le=function(e){return null==e},De=function(e){return!!e&&Array.isArray(e)},Ne=function(e){return"string"==typeof e||e instanceof String},qe=ye,Ue=function(e){switch(!0){case Le(e):return!0;case Ne(e):return""===e;case De(e):return 0===e.length;case qe(e):return 0===Object.keys(e).length}return!1},Re=he(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var n=t,r=0;e.length>r;r++){if(null==n)return;n=n[e[r]]}return n})),Ve="twt_wuid_visit_storage",We=function(){function e(e){this.tracking=e,this._storage=null}return Object.defineProperty(e.prototype,"storage",{get:function(){var e,t=this.currentWuidVisitId;return t?(null===(e=this._storage)||void 0===e?void 0:e.visitId)===t?this._storage:this.parseStorage():null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentWuidVisitId",{get:function(){return this.tracking.state.wuidVisitId},enumerable:!1,configurable:!0}),e.prototype.createEmptyStorage=function(){var e=this.currentWuidVisitId;if(!e)return null;var t={visitId:e,items:{}};return c.setItem(Ve,JSON.stringify(t)),t},e.prototype.parseStorage=function(){var e=JSON.parse(c.getItem(Ve)||"{}");return function(e){return"object"==typeof e&&"visitId"in e&&"object"==typeof e.items}(e)&&e.visitId===this.currentWuidVisitId?e:this.createEmptyStorage()},e.prototype.getElement=function(e){var t;return null===(t=this.storage)||void 0===t?void 0:t.items[e]},e.prototype.setElement=function(e,t){var n=this.storage;n&&(n.items[e]=t.toString(),c.setItem(Ve,JSON.stringify(n)))},e}();function ze(e){var t;return(t={})[Me.WuidVisit]=new We(e),t}function Fe(e,t,n){var r,o,i=e._prot.context;switch(n.source){case Ae.State:for(var a=0,s="string"==typeof n.path?[n.path]:n.path;s.length>a;a++){if(void 0!==(o=Re(s[a].split("."),e.state)))break}break;case Ae.Cookie:o=i.cookies.get(n.name);break;case Ae.Static:o=n.value;break;case Ae.Code:var u=n.persistance;if(u){var c=t[u.type].getElement(u.key);if(c){o="string"!==n.type?null===(r=n.persistance)||void 0===r?void 0:r.parse(c):c;break}}(o=n.code({tracking:e,context:i,collect:function(n){return Fe(e,t,n)}}))&&u&&t[u.type].setElement(u.key,function(e){return Array.isArray(e)?e.join(","):String(e)}(o))}return o}function Be(){try{return window.orientation?90===Math.abs(Number(window.orientation)):"landscape"===screen.orientation.type.split("-")[0]}catch(e){}return!0}!function(e){e[e.WuidVisit=0]="WuidVisit"}(Me||(Me={})),function(e){e.State="state",e.Cookie="cookie",e.Code="code",e.Static="static",e.Never="never"}(Ae||(Ae={}));var He={name:"mobileOrientation",run:function(){return Be()?"landscape":"portrait"},observe:function(e,t){window.addEventListener("orientationchange",t)}};var Ge=["ANONYMOUS","AUTHENTICATED","APPLICANT","CANDIDATE","REGISTERED","CLIENT","EMPLOYEE","ADMINISTRATOR","GOD"],Je=Ge.indexOf("REGISTERED"),Ke="Not Logged In",Ye={name:"userInfo",stateKey:["userId","userStatus"],run:function(e,t){void 0===t&&(t={});var n=t.cookieName,r=void 0===n?W:n,o=t.anonymousId,i=Ke,a={userId:void 0===o?"1111":o,userStatus:i},s=e.get("config"),u=e.cookies.get(r);return s.disableUserInfo?Promise.resolve({}):u?e.get("tapi")(e,"session_status?sessionid="+encodeURIComponent(u)).then((function(e){var t=e.payload;return"OK"===e.resultCode?{userId:t.userId,userStatus:Ge.indexOf(t.accessLevel)<Je?i:"Logged In"}:a})).catch((function(){return a})):Promise.resolve(a)}};var $e={hid:{type:"string",source:Ae.State,path:"hid"},productCategory:{type:"string",source:Ae.State,path:"productCategory"},productName:{type:"string",source:Ae.State,path:"productName"},appName:{type:"string",source:Ae.State,path:"appName"},wuid:{type:"string",source:Ae.Code,code:function(e){return e.context.cookies.get(U.wuid.name)}},userType:{type:"int",source:Ae.Code,code:function(e){return{Visitor:0,"Client-Light":10,Applicant:20,"Client-Heavy":30}[e.context.cookies.get(V)||"Visitor"]||0}},userIsNew:{type:"boolean",source:Ae.Code,code:function(e){return"new"===e.tracking.state.nr},nullable:!1},wuidVisitId:{type:"string",source:Ae.State,path:"wuidVisitId"},wuidVisitNum:{type:"int",source:Ae.State,path:"wuidVisitNum"},userLoggedIn:{type:"boolean",source:Ae.Code,code:function(e){var t=e.tracking;return t.state.userStatus!==Ke&&!!t.state.userStatus},nullable:!1},portalUserId:{type:"string",source:Ae.State,path:"userId"},visitorIsNew:{type:"boolean",source:Ae.Code,code:function(e){var t=e.context,n=(new Date).getTime(),r=t.cookies.get(U.visitorNewOrReturn.name);if(!r)return t.cookies.set(U.visitorNewOrReturn,n+"-New"),!0;var o=r.split("-");return 18e5>n-Number(o[0])&&"New"===o[1]?(t.cookies.set(U.visitorNewOrReturn,n+"-New"),!0):(t.cookies.set(U.visitorNewOrReturn,n+"-Repeat"),!1)},nullable:!1},pageUrl:{type:"string",source:Ae.Code,code:function(e){var t=e.tracking;return t.state.url.hostname+t.state.url.pathname},nullable:!1},parentUrlFlag:{type:"boolean",source:Ae.Code,code:function(e){var t;return!!(null===(t=e.tracking.state.url)||void 0===t?void 0:t.frameurl)},nullable:!1},queryParams:{type:"string",source:Ae.Code,code:function(e){var t,n=null===(t=e.tracking.state.url)||void 0===t?void 0:t.safeSearch;if("string"==typeof n){var r=n.replace(/(?:\?|&)((?:utm_source|utm_term|utm_content|utm_medium|utm_campaign))(?:=|&?)([\w+,.%-]+)/g,""),o=!r.length||"?"!==r.charAt(0)&&"&"!==r.charAt(0)?0:1;return r.substring(o,o+255)}}},queryParamsFull:{type:"string",source:Ae.State,path:"url.safeSearch"},previousPageUrl:{type:"string",source:Ae.State,path:"previousPage"},frameUrl:{type:"string",source:Ae.Code,code:function(e){var t,n=e.context;if(null===(t=e.tracking.state.url)||void 0===t?void 0:t.frameurl)return n.location.hostname+n.location.pathname}},referrer:{type:"string",source:Ae.Code,code:function(){return document.referrer}},pageDomain:{type:"string",source:Ae.State,path:"url.hostname"},pagePath:{type:"string",source:Ae.State,path:"url.pathname"},lowCardinalityPagePath:{type:"string",source:Ae.Code,code:function(e){var t,n=(null===(t=e.tracking.state.url)||void 0===t?void 0:t.pathname)||e.context.location.pathname,r=n.split("/");return-1!==n.indexOf("travel/flights")?r.slice(0,4).join("/"):-1!==n.indexOf("/invest/")||-1!==n.indexOf("/collectmoney/")?r.slice(0,3).join("/"):-1!==n.indexOf("/rm/")?"/rm/id":r.map((function(e){return e.replace(/^(id)?[0-9]{3,}$/,"id")})).join("/")},nullable:!1},pageLanding:{type:"string",source:Ae.State,path:"pageLanding"},documentUrl:{type:"string",source:Ae.Code,code:function(e){var t=e.context;return t.location.hostname+t.location.pathname}},documentTitle:{type:"string",source:Ae.Code,code:function(){return document.title}},documentPath:{type:"string",source:Ae.Code,code:function(e){return e.context.location.pathname}},queryUtmSource:{type:"string",source:Ae.State,path:"url.safeQuery.utm_source"},queryVariation:{type:"string",source:Ae.State,path:"url.safeQuery.variation"},queryDcoCampaign:{type:"string",source:Ae.State,path:"url.safeQuery.dco_campaign"},utmSource:{type:"string",source:Ae.State,path:"utmMarkers.utm_source"},utmContent:{type:"string",source:Ae.Code,code:function(e){var t,n=null===(t=e.tracking.state.utmMarkers)||void 0===t?void 0:t.utm_content;if("string"==typeof n)return n.substring(0,255)}},utmTerm:{type:"string",source:Ae.State,path:"utmMarkers.utm_term"},utmMedium:{type:"string",source:Ae.State,path:"utmMarkers.utm_medium"},utmCampaign:{type:"string",source:Ae.State,path:"utmMarkers.utm_campaign"},sessionUtmSource:{type:"string",source:Ae.State,path:"sessionUtmMarkers.utm_source"},sessionUtmMedium:{type:"string",source:Ae.State,path:"sessionUtmMarkers.utm_medium"},sessionUtmCampaign:{type:"string",source:Ae.State,path:"sessionUtmMarkers.utm_campaign"},sessionMarketingChannel:{type:"string",source:Ae.State,path:"sessionMarketingChannel"},internalSource:{type:"string",source:Ae.State,path:"url.safeQuery.internal_source"},utmReferrer:{type:"string",source:Ae.State,path:"url.safeQuery.utm_referrer"},webMaster:{type:"string",source:Ae.State,path:"utmMarkers.wm"},wmSid:{type:"string",source:Ae.State,path:"utmMarkers.sid"},gaId:{type:"string",source:Ae.Code,code:function(e){var t;return null===(t=e.context.cookies.get("_ga"))||void 0===t?void 0:t.split(".").slice(1).join(".")}},dcoGeneralId:{type:"string",source:Ae.State,path:"personalizedLandingMetrics.state.dcoGeneralId"},dcoGeneralMenuId:{type:"string",source:Ae.Code,code:function(e){var t=e.tracking;if(Array.isArray(t.state.dcoTracking)){var n=t.state.dcoTracking.find((function(e){return e&&"routesMenu"===e.dcoAppliedEntity}));if(n)return n.dcoGeneralId}}},urlBeforeDcoRedirect:{type:"string",source:Ae.State,path:"dco.beforeRedirectPageUrl"},dcoId:{type:"string",source:Ae.Cookie,name:"dco.id"},dcoSelectedWith:{type:"string",source:Ae.State,path:"personalizedLandingMetrics.state.dcoSelectedWith"},dcoAppliedStatus:{type:"string",source:Ae.State,path:"personalizedLandingMetrics.enrichmentTechInfo.dcoAppliedStatus"},dcoResponseStatus:{type:"string",source:Ae.State,path:"personalizedLandingMetrics.techInfo.response-status"},dcoResponseTime:{type:"double",source:Ae.Code,code:function(e){var t,n,r=null===(n=null===(t=e.tracking.state.personalizedLandingMetrics)||void 0===t?void 0:t.techInfo)||void 0===n?void 0:n["response-time"];return isFinite(Number(r))?Number(r):void 0}},dcoGeneralIdBeforeRedirect:{type:"string",source:Ae.State,path:"personalizedLandingMetrics.dcoVariablesBeforeRedirect.dcoGeneralId"},homeDcoGeneralIds:{type:"string[]",source:Ae.State,path:"homeDcoGeneralIds",nullable:!0},mobileOrientation:{type:"int",source:Ae.Code,code:function(){return Be()?0:1},nullable:!1},screenWidth:{type:"int",source:Ae.Code,code:function(){return window.screen.width},nullable:!1},screenHeight:{type:"int",source:Ae.Code,code:function(){return window.screen.height},nullable:!1},screenSize:{type:"string",source:Ae.Code,code:function(){return window.screen.width+" x "+window.screen.height}},viewportHeight:{type:"int",source:Ae.Code,code:function(){return document.documentElement.clientHeight}},viewportWidth:{type:"int",source:Ae.Code,code:function(){return document.documentElement.clientWidth}},devicePixelRatio:{type:"double",source:Ae.Code,code:function(){return window.devicePixelRatio}},remoteAddress:{type:"string",source:Ae.State,path:"remoteAddress"},layoutMedia:{type:"string",source:Ae.State,path:"layoutMedia"},uaParserType:{type:"string",source:Ae.State,path:"uaParserType"},deviceType:{type:"string",source:Ae.Code,code:function(e){var t=e.tracking;if(t.state.hdRequestInfo)return t.state.hdRequestInfo.ismobile?"Mobile":t.state.hdRequestInfo.istablet?"Tablet":t.state.hdRequestInfo.isconsole?"Console":"Desktop"}},deviceVendor:{type:"string",source:Ae.State,path:"hdRequestInfo.vendor"},deviceModel:{type:"string",source:Ae.State,path:"hdRequestInfo.model"},deviceWidth:{type:"int",source:Ae.State,path:"hdRequestInfo.width"},deviceHeight:{type:"int",source:Ae.State,path:"hdRequestInfo.height"},deviceDisplaySize:{type:"double",source:Ae.State,path:"hdRequestInfo.displaysize"},adblockFlag:{type:"boolean",source:Ae.Code,code:function(e){return"no"!==e.tracking.state.adblock}},dspClickId:{type:"string",source:Ae.State,path:"dspClickId"},dmpId:{type:"string",source:Ae.State,path:"dmpId"},dmpSid:{type:"string",source:Ae.Cookie,name:"dmp.sid"},webTrackingConst:{type:"string",source:Ae.Static,value:"web-tracking"},errorType:{type:"string",source:Ae.State,path:"errorType"},pageErrorCode:{type:"int",source:Ae.Code,code:function(e){var t=e.tracking;return isFinite(Number(t.state.pageErrorCode))?Number(t.state.pageErrorCode):void 0}},dcoCampaign:{type:"string",source:Ae.State,path:"personalizedLandingMetrics.state.dcoCampaignId"},searchParams:{type:"string",source:Ae.State,path:"url.safeSearch"},hashParams:{type:"string",source:Ae.State,path:"url.hash"},wuidVisitLandingPage:{type:"string",source:Ae.Code,code:function(e){var t=e.context;return t.location.origin+t.location.pathname},persistance:{type:Me.WuidVisit,key:"pageLanding"}},isPwa:{type:"boolean",source:Ae.Code,code:function(){return"standalone"==(window.matchMedia("(display-mode: standalone)").matches?"standalone":(window.matchMedia("(display-mode: browser)"),"browser"))}},userId:{type:"string",source:Ae.State,path:"userIdAwaited"}},Qe={utmContentCid:{type:"string",source:Ae.Code,code:function(e){var t,n=(0,e.collect)($e.utmContent);return null===(t=null==n?void 0:n.split("|cid|")[1])||void 0===t?void 0:t.split("|")[0]}}},Ze=t(t({},$e),Qe);function Xe(e){return e.split("?")[0]}var et=function(){};function tt(e,t,n){Array.isArray(t)||(n=t,t=[]);var r=Object.assign({},A,n);e.bind("config",r);var o=function(e){void 0===e&&(e={});var t=e.defaults,n=void 0===t?T:t,r=e.alwaysEnabled,o=void 0===r?S.Essential:r,i=n,a=Z();return Object.assign(a,{once:function(e,t){var n=function(){a.off(e,n),t()};a.on(e,n)},isAllowed:function(e){return(this.getAllowedMask()&e)===e},resetAllTo:function(e){i=e,a.emit("update")},update:function(e,t){void 0===t&&(t="keep"),"enable"===t?i|=T:"disable"===t&&(i=0);for(var n=0,r=Object.keys(e);r.length>n;n++){var o=Number(r[n]);e[o]?i|=o:i&=~o}a.emit("update")},getAllowedMask:function(){return(null!=i?i:n)|o},categories:Oe})}({defaults:r.ucDefaults,alwaysEnabled:r.ucAlwaysEnabled});e.bind("consentVault",o);var a=function(e){var t=e.get("config"),n=e.getOr("log"),r=t.log,o=e.getOr("logger"),i=t.logger;n&&n(f),r&&r(f);var a=i||r||o||n;return"object"==typeof a?a:p("function"==typeof a?a:l)}(e);e.bind("logger",a);var s="u"!==(typeof window)[0],u={};s&&(r.recreateTracking?window[r.global]&&window[r.global]._clearAllListeners():u=window[r.global]?window[r.global]:u,window[r.global]=u,u.localStorage=c,u.sessionStorage=d);var m=[],v=e.emitter||Z();Object.assign(u,v);var g={};u.on=function(e,t){if(e&&"event:"===e.substring(0,6)&&s){var n=e.substring(6),r=function(e){e instanceof CustomEvent&&t(e.detail)},o=g[n]||(g[n]=new Map);o.set(t,r),m.push((function(){document.body.removeEventListener(n,r),o.delete(t)})),document.body.addEventListener(n,r)}else m.push((function(){return v.off(e,t)})),v.on(e,t)},u.off=function(e,t){if("event:"===e.substring(0,6)&&s){var n=e.substring(6),r=g[n],o=null==r?void 0:r.get(t);o&&document.body.removeEventListener(n,o)}else v.off(e,t)},u._clearAllListeners=function(){return m.forEach((function(e){return e()})),u},u.state=Object.assign({},u.state,r.initialState);var h=[],y=!1;function w(e){y=!0,h.push(e)}function b(t,n,r){void 0===r&&(r={}),u.emit("event",t,n),e.getOr("event",et)(t,n);var o=[r.legacy?"[LEGACY]":r.fromEventea?"[EVENTEA]":"","Dispatched event:"].filter((function(e){return!!e})).join(" ");a.info(o,t,n)}var _=!1,k=[];u.addEventsHandler=function(e){return k.push(e),u},u.addEventsHandler((function e(t,n){var r=this&&this.isSendContext?this:{};!s||document.body||_||(w(new Promise((function(e){document.addEventListener("DOMContentLoaded",e)}))),_=!0),!1===y?b(t,n,r):Promise.all(h).then((function(r){y=r.length!==h.length,e(t,n)}))}));var E,x=function(e){var t=u.state;return t!==e&&(u.state=e,u.emit("change",e,t)),u},C=(E=[],{run:function(e,t){for(var n=[],r=2;arguments.length>r;r++)n[r-2]=arguments[r];var o=E.map((function(t){return t(e)}));return Te.apply(void 0,o)(t).apply(void 0,n)},add:function(e){E.push(e)}});u.use=function(t){var n="plugin"in t?t.plugin:t;try{n({config:r,tracking:u,context:e,update:x,providersPipeline:C,addEventsBlocker:w})}catch(e){a.error(e,"Failed to initialize plugin "+t.name)}return u},u.event=function(e,t){return k.forEach((function(n){return n(e,t)})),u},u.addPixel=function(e){return function(t){return document.createElement("img").src=xe(t),e}}(u),u.addPixels=function(e){return function(t,n){void 0===n&&(n={});var r=n.timeout,o=void 0===r?3e3:r,i=n.completeEvent,a=void 0===i?"pixelRequestsCompleted":i,s=t.map(xe),u=s.map(Pe),c=!1;return Ie?Promise.resolve(e.event(a,{timeout:c,urls:s})):Promise.race([Ce(u),new Promise((function(e){return setTimeout((function(){c=!0,e(null)}),o)}))]).then((function(){return e.event(a,{timeout:c,urls:s})}))}}(u),u.utils={getConsentVault:function(){return o}},u.addUtil=function(t){var n=t.name,r=t.init;try{u.utils[n]=r({tracking:u,context:e}),u.emit("util-provided:"+n,u.utils[n])}catch(e){a.error(e,"Failed to initialize util "+n)}return u},u.callUtil=function(e){for(var t=[],n=1;arguments.length>n;n++)t[n-1]=arguments[n];var o=new Promise((function(e,t){return setTimeout((function(){return t(new Error("Timeout has been reached"))}),r.utilTimeout)})),i=new Promise((function(n){var r;e in u.utils?n((r=u.utils)[e].apply(r,t)):u.on("util-provided:"+e,(function(e){n(e.apply(void 0,t))}))}));return Promise.race([i,o]).catch((function(t){a.error(t,'Calling tracking utility "'+e+'" has been failed')}))},u.extend=function(e){a.info("Tracking extend:",e);var t=Object.keys(e).reduce((function(t,n){return se(t,n.split("."),e[n])}),u.state);return x(t)},u.extendDeep=function(e){a.info("Tracking extendDeep:",e);var t=Object.keys(e).reduce((function(t,n){return me(t,n.split("."),(function(e,t){return je(e)&&je(t)?function(){for(var e=arguments,t=arguments.length,n=0,r=arguments[0];++n<t;)r=ve(r,e[n]);return r}(e,t):t}),e[n])}),u.state);return x(t)},u.remove=function(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];a.info("Tracking remove:",e.join(", "));var n=le.apply(void 0,i([u.state],e.map((function(e){return e.split(".")})),!1));return x(n)};u.updateLocation=function(){var t=function(t){var n,r,o=Ee.run(e);return o.href!==(null===(n=t.url)||void 0===n?void 0:n.href)?(null===(r=t.url)||void 0===r?void 0:r.href)?se(t,"url",o,"previousPage",Xe(t.url.href)):se(t,"url",o):t}(u.state);return t!==u.state&&(x(t),u.emit("newLocation")),u},u.update=x;var I=r.providers||{},P=function(t,n){if(void 0===n&&(n=!1),t.needsConsent&&!o.isAllowed(t.needsConsent))return o.once("update",(function(){P(t,n)})),Promise.resolve();var r,i=t.stateKey||t.name,s=I[t.name];if(u.emit("provider-run",t.name),n){var c=void 0;if(i instanceof Array){var d=i.reduce((function(e,t){return void 0!==oe(u.state,t)&&(e[t]=oe(u.state,t)),e}),{});Ue(d)||(c=d)}else c=oe(u.state,i.split("."));if(void 0!==c)return u.emit("provider-resolved",t.name,c),Promise.resolve()}try{r=Promise.resolve(C.run(t,t.run,e,s))}catch(e){r=Promise.reject(e)}return r.then((function(e){!function(e,t){var n;u.extend("string"==typeof e?((n={})[e]=t,n):t)}(i,e),u.emit("provider-resolved",t.name,e)})).catch((function(e){if(!e||"ESkipApply"!==e.code)throw u.emit("provider-error",t.name,e),a.error(e,"Provider "+t.name+" error"),e}))},O=function(t){var n=t.map((function(t){return"client"===e.env&&t.observe&&t.observe(e,(function(){P(t,!1)})),P(t,!0)}));return n.length?Ce(n):Promise.resolve()};u.ready=Promise.resolve().then((function(){return O(t)}));var M=ze(u);return u._prot={applyDataProvider:P,collectDataElements:function(e,t){return function(e,t,n){var r=(n||{}).itemMapper,o=void 0===r?function(e){return e}:r,i=ze(e);return Object.keys(t).reduce((function(n,r){var a=t[r];if(a.source===Ae.Never)return n;var s=Fe(e,i,a);return void 0===s||a.requiredValues&&!a.requiredValues.every((function(e){return e in n}))||(n[r]=o(s)),n}),{})}(u,e,t)},collectDataElement:function(e){return Fe(u,M,e)},context:e,dataPool:Ze},u.waitFor=function(e){return e in u.state?Promise.resolve(u.state[e]):new Promise((function(t){var n=function(r){e in r&&(t(r[e]),u.off("change",n))};u.on("change",n)}))},u.fullfill=O,u._version="5.91.6",s&&b("tracking-created",u),u}function nt(e,t){for(var n={},r=0,o=e;o.length>r;r++){var i=o[r];i in t&&(n[i]=t[i])}return n}var rt,ot={name:"referrer",run:function(e){var t="",n=e.getOr("referrer");return n&&n.hostname!==e.location.hostname&&(t=n.hostname),t}},it=he(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.slice(-e.length)===e}));function at(e,t,n){return void 0===e&&(e=[]),t!==n&&[t,n].some((function(t){return e.every((function(e){return t!==e&&!it("."+e,t)}))}))}!function(e){e.source="source",e.position="position",e.block="block"}(rt||(rt={}));var st="session_utm_source",ut=[U.utmSource,U.utmContent,U.utmCampaign,U.utmMedium,U.utmTerm,U.sid,U.wm],ct=[U.ctxPosition,U.ctxBlock,U.ctxSource],dt={name:"utmMarkers",stateKey:["utmMarkers","ctx_position","ctx_block","ctx_source"],run:function(e){var n,r=ut.map((function(e){return e.name})),o=ct.map((function(e){return e.name})),i=e.location,a=ge(e),s=i.query.utm_source||!a?i.query:a.query,u=i.hash.replace("#",""),c=u?y(u):{},l=nt(L,s),f=nt(r,s),p=nt(r,c),m=Ue(f)?p:f;function v(t,n){for(var r=0,o=t;o.length>r;r++){var i=o[r],a=n[i.name];a?e.cookies.set(i,a):e.cookies.remove(i.name,!0)}}function g(t){return nt(t,e.cookies.getAll())}function h(){return t({internal_source:""},l)}function w(t,n,r){void 0===r&&(r=!1),r||(e.cookies.set(U.utmDateSet,t.cookieDate||Date.now()),v(ut,t),v(ct,n||{})),t.session_utm_source&&d.setItem(st,t.session_utm_source)}var b,_,k,S,E,x=t({utm_source:"",collectionMethod:null,cookieDate:null},h());if(m.utm_source)w(x=t(t({collectionMethod:"get",cookieDate:Date.now(),utm_source:"",session_utm_source:m.utm_source||""},h()),m),b=function(){var e=s[rt.position];if("string"!=typeof e)return{};var t,n={};return j.test(e)?(t=e.split(/\D/),n.ctx_position=t.length>1?t[1]:"",n.ctx_block=t[0]+e.replace(/\d/g,"")):(n.ctx_position=e,n.ctx_block=s[rt.block]),n.ctx_source=s[rt.source]||"",n}());else{_=g(r),k=Number(e.cookies.get("utm_date_set"))||null,S=d.getItem(st)||"",E=null,_.utm_source&&(E="cookie");var C=null===(n=(x=t(t({collectionMethod:E,cookieDate:k,utm_source:"",session_utm_source:S},h()),_)).utm_source)||void 0===n?void 0:n.includes("."),I=ot.run(e),P=e.get("config").internalDomains;""!==I&&at(P,i.hostname,I)&&(!x.utm_source||C?(x=function(e){return t({utm_source:e,session_utm_source:e,collectionMethod:"referrer",cookieDate:Date.now()},h())}(I),w(x,b={})):x.session_utm_source||(x.session_utm_source=I,w(x,b,!0)))}return b&&(b=g(o)),t(t({},b),{utmMarkers:x})}},lt={name:"dmpId",run:function(e){var t=e.cookies.get(z);return Promise.resolve(t&&"no dmp_id"!==t?t:"")}},ft=he(2,(function(e,t){var n;function r(){var r=this,o=arguments;clearTimeout(n),n=setTimeout((function(){return t.apply(r,o)}),e)}return r.cancel=function(){return clearTimeout(n)},r})),pt=ft;function mt(e){return Object.keys(e)}var vt,gt={desktopLarge:"(min-width: 1600px)",desktopMedium:"(min-width: 1360px)",desktopSmall:"(min-width: 1024px)",tabletLarge:"(min-width: 768px)",tabletSmall:"(min-width: 600px)",mobile:"(min-width: 599x)"},ht=mt(gt),yt={name:"layoutMedia",run:function(){var e="mobile";try{for(var t=0,n=ht;n.length>t;t++){var r=n[t];if(matchMedia(gt[r]).matches){e=r;break}}}catch(e){}return e},observe:function(e,t){addEventListener("resize",pt(300,t))}},wt=function(e){return Math.round(e)/1e3},bt=function(e){return function(t){return e.test(t)}},_t=bt(/\.js$/),kt=bt(/\.css$/),St=bt(/\.(?:svg|png|jpeg|webp|jpg)$/),Et=bt(/\.(?:woff|eot|woff2|ttf)/);!function(e){e.html="html",e.js="js",e.css="css",e.img="img",e.font="font",e.other="other"}(vt||(vt={}));var xt=function(e,t){if(e.getEntriesByType)return e.getEntriesByType(t)},Ct=function(e){var t=xt(e,"paint");return t&&t[0]?t[0].startTime:0},It=function(e,t){return e&&e[t]||0},Pt=function(e,t){return{duration:It(e,"duration")+wt(t.duration),transferSize:It(e,"transferSize")+t.transferSize,encodedBodySize:It(e,"encodedBodySize")+t.encodedBodySize}},Ot=function(e){var t={},n=xt(e,"resource");if(n&&n.length>0){var r={};n.forEach((function(e){var n=function(e){switch(!0){case kt(e):return vt.css;case _t(e):return vt.js;case St(e):return vt.img;case Et(e):return vt.font;default:return vt.other}}(e.name.split("?",1)[0]);vt[n]&&(r[n]||(r[n]=0),r[n]++,t[n]=Pt(t[n],e),t[n].count=r[n])}))}var o=xt(e,"navigation");return o&&o.length>0&&(t[vt.html]=Pt({},o[0])),t};var Tt=function(e){return e.getEntries?e.getEntriesByType("resource").sort((function(e,t){var n=e.duration,r=t.duration;return n>r?1:n===r?0:-1})).reduce((function(e,t){var n,r=function(e){var t,n=e.name,r=e.duration;return{name:n=n.split("?",1)[0],duration:(t=r,Math.round(t)/1e3)}}(t),o=r.name,i=r.duration,a=function(e){return/\.js$/.test(e)?"js":/\.css$/.test(e)?"css":/\.(?:svg|png|jpeg)$/.test(e)?"img":/\.(?:woff|eot|woff2|ttf)/.test(e)?"font":"other"}(o);return e[a]?e[a][o]=i:e[a]=((n={})[o]=i,n),e}),{}):{}},Mt=function(){try{var e=window.performance,n=function(){var e;try{if(!(e=window.performance).timing||!e.timing.loadEventEnd)throw 0===e.timing.loadEventEnd&&console.error("Library used at browser initialization page. Reed docs"),new Error("Not implemented timing api")}catch(e){return{}}var t=e.timing,n=t.requestStart,r=t.responseStart,o=t.domComplete,i=t.loadEventEnd,a=t.domInteractive,s=t.navigationStart,u=[{key:"connection",start:s,end:n},{key:"backend",start:n,end:r},{key:"pageDownload",start:r,end:t.responseEnd},{key:"first-paint",start:0,end:Ct(e)},{key:"domInteractive",start:s,end:a},{key:"domComplete",start:s,end:o},{key:"pageLoadTime",start:s,end:i}],c={};return u.forEach((function(e){var t=wt(e.end-e.start);c[e.key]=t>0||2e3>t?t:void 0})),c.download=Ot(e),c}(),r=function(e){var t=e;if(!t.download)return{};for(var n={sizeTransferred:0,sizeResources:0},r=0,o=mt(t.download);o.length>r;r++){var i=o[r];Object.prototype.hasOwnProperty.call(t.download,i)&&(n.sizeTransferred+=t.download[i].transferSize,n.sizeResources+=t.download[i].encodedBodySize)}return n}(n);return t({navigationStart:e.timing.navigationStart,timezone:-1*(new Date).getTimezoneOffset()/60,timings:n,requests:Tt(e)},r)}catch(e){return{}}};var At={name:"pageSpeed",run:function(e){return new Promise((function(e){"complete"===document.readyState?e():window.addEventListener("load",(function(){return e()}))})).then((function(){return void 0===(e=0)&&(e=0),new Promise((function(n){setTimeout((function(){return n(t)}),e)}));var e,t})).then((function(){var e=Mt(),r=e.requests,o=e.timings,i=n(e,["requests","timings"]);return t(t(t({},i),o),{requests:r,timings:o})}))}},jt={name:"adblock",run:function(e,t){void 0===t&&(t={});var n=null;return t.fakeDivId?n=document.getElementById(t.fakeDivId):((n=document.createElement("div")).setAttribute("class","ads ad adsbox ad-placement carbon-ads"),n.setAttribute("style","height: 1px;width: 1px;position: absolute;left: -9999px;top: -9999px"),document.body.appendChild(n)),new Promise((function(e){setTimeout((function(){e(n&&0===n.offsetHeight?"yes":"no")}),20)}))}},Lt=he(3,(function(e,t,n){void 0===n&&(n=[]);for(var r=n.length,o=0;r>o;o++)t=e(t,n[o],o,n);return t}));function Dt(){var e=new Uint8Array(16);return crypto.getRandomValues(e),Lt((function(e,t){return e+(n=t.toString(16),void 0===(o="0")&&(o="0"),(r=2)>n.length?new Array(r-n.length+1).join(o)+n:n);var n,r,o}),"",e)}var Nt=function(e,t){return function(e,t,n,r){var o=Number(e.cookies.get(t.name)),i=Date.now();return!isFinite(Number(o))||i>o+n?r().then((function(){return e.cookies.set(t,i)})):Promise.resolve()}(e,U.wuidLC,864e5,(function(){return function(e,t){var n=e.get("tapi"),r=e.get("logger"),o=["wuid="+encodeURIComponent(t)],i=e.cookies.get(R);return i&&o.push("ga_utma="+encodeURIComponent(i)),n(e,"webuser?"+o.join("&")).catch((function(e){return r.warn(e,"Wuid provider fetch error")}))}(e,t)}))};var qt,Ut,Rt=function(e){var t=(void 0===e?{}:e).sendWebuserRequest;return{name:"wuid",run:function(e){var n;return n=function(e){var t=e.cookies.get(U.wuid.name);if(/[0-9a-f]{32}/gi.test(t))return t}(e),n||(n=Dt(),e.cookies.set(U.wuid,n)),t&&Nt(e,n),n}}}({sendWebuserRequest:!0}),Vt={name:"userType",run:function(e){return e.cookies.get(V)||"Visitor"}},Wt={name:"pageLanding",run:function(e){var t=e.cookies.get(U.pageLanding.name);t&&"/"===t[0]&&(t=e.location.origin+t);var n=t||e.location.origin+e.location.pathname;return e.cookies.set(U.pageLanding,n),n}},zt={name:"previousPage",run:function(e){var t=e.getOr("referrer"),n=e.location,r=1===Re(["performance","navigation","type"],window)?n:t;if(r){var o=r.hostname,i=n.hostname;if(!at(e.get("config").internalDomains,o,i))return Xe(r.href)}}},Ft={name:"dspClickId",run:function(e){var t=ge(e),n=t&&t.query[U.dspId.name]||e.location.query[U.dspId.name],r=e.cookies.get(U.dspId.name),o=n||r||"no dsp_click_id";return e.cookies.set(U.dspId,o),o}},Bt={name:"yclid",run:function(e){var t=ge(e),n=(null==t?void 0:t.query[U.yclid.name])||e.location.query[U.yclid.name];if(n)return e.cookies.set(U.yclid,n),n;var r=e.cookies.get(U.yclid.name);return r||void 0}},Ht={name:"tcpaClickId",run:function(e){var t=ge(e),n=(null==t?void 0:t.query[U.tcpaId.name])||e.location.query[U.tcpaId.name];if(n){var r=Number(e.location.query.cookie_exp),o=!!Number.isFinite(r)&&60*r*60;return e.cookies.set(U.tcpaId,n,{expires:o}),n}var i=e.cookies.get(U.tcpaId.name);if(i)return i}};!function(e){e.Storage="storage",e.GetParams="get",e.Referrer="referrer"}(qt||(qt={})),function(e){e.PaidSearch="Paid Search",e.Target="Target",e.Display="Display",e.Native="Native",e.Bloggers="Bloggers",e.Affiliates="Affiliates",e.JobSearchSite="Job Search Site",e.SMS="SMS",e.Email="Email",e.OrganicSearch="Organic Search",e.SMM="SMM",e.MemberGetAMember="Member Get a Member",e.Messengers="Messengers",e.Referral="Referral",e.Direct="Direct",e.Unsorted="Unsorted"}(Ut||(Ut={}));var Gt=["utm_source","utm_content","utm_campaign","utm_medium","utm_term"];var Jt={name:"sessionUtmMarkers",stateKey:["sessionUtmMarkers","sessionMarketingChannel"],run:function(e){var n,r=e.location,o=ge(e),i=r.query.utm_source||!o?r.query:o.query,a=r.hash.replace("#",""),s=a?y(a):{},u=nt(L,i),c=nt(Gt,i),l=nt(Gt,s),f=Ue(c)?l:c;function p(){return t({internal_source:""},u)}function m(e){!function(e,t){for(var n=0,r=e;r.length>n;n++){var o=r[n],i=t[o];i?d.setItem(o,i.toString()):d.removeItem(o)}}(Gt,e)}var v,g,h=t({utm_source:"",collectionMethod:null},p());if(f.utm_source)m(h=t(t({collectionMethod:qt.GetParams,utm_source:""},p()),f));else{v=Gt.reduce((function(e,t){var n=d.getItem(t);return n&&(e[t]=n),e}),{}),g=null,v.utm_source&&(g=qt.Storage);var w=null===(n=(h=t(t({collectionMethod:g,utm_source:""},p()),v)).utm_source)||void 0===n?void 0:n.includes("."),b=ot.run(e),_=e.get("config").internalDomains;""!==b&&at(_,r.hostname,b)&&(h.utm_source&&!w||(h=function(e){return t({utm_source:e,collectionMethod:qt.Referrer},p())}(b),m(h)))}var k=function(e){var t=e.utm_source,n=e.utm_medium,r=void 0===n?"":n;return r.startsWith("ctx")||r.startsWith("context")||t.includes("yabs.yandex")?Ut.PaidSearch:r.startsWith("trg")||r.startsWith("target")?Ut.Target:r.startsWith("dsp")||r.startsWith("display")||r.startsWith("vdo")?Ut.Display:r.startsWith("ntv")?Ut.Native:r.startsWith("blg")||r.startsWith("ins")?Ut.Bloggers:r.startsWith("aft")||r.startsWith("affiliate")?Ut.Affiliates:t.startsWith("vac")?Ut.JobSearchSite:r.includes("sms")||t.includes("sms")?Ut.SMS:r.startsWith("mln")||r.startsWith("email")?Ut.Email:!r&&["yandex.","google.","com.google","mail.ru","bing.","rambler.","duckduckgo.","yahoo."].some((function(e){return t.includes(e)}))?Ut.OrganicSearch:["vk.com","instagram.com",".facebook.","com.twitter","linkedin.com","twitter.com","livejournal.com","reddit.com","youtube.com"].some((function(e){return t.includes(e)}))||"ok.ru"===t||"vk.com"===t||r.startsWith("smm.")||r.startsWith("social")?Ut.SMM:t.includes("mgm_")||t.includes("baf_")?Ut.MemberGetAMember:"t.co"===t||"t.me"===t?Ut.Messengers:t.includes(".")&&!r?Ut.Referral:t||r?Ut.Unsorted:Ut.Direct}(h);return{sessionUtmMarkers:h,sessionMarketingChannel:k}}},Kt={name:"wuidVisit",stateKey:["wuidVisitId","wuidVisitNum"],observe:function(e,t){var n,r,o=["mousemove","click","keypress"],i=function(){n=setTimeout((function(){n=void 0;var e=function(){for(var n=0,a=o;a.length>n;n++){document.removeEventListener(a[n],e)}r=void 0,t(),i()};r=e;for(var a=0,s=o;s.length>a;a++){document.addEventListener(s[a],e)}}),3e4)};return i(),function(){if(r)for(var e=0,t=o;t.length>e;e++){document.removeEventListener(t[e],r)}n&&clearTimeout(n)}},run:function(e){var t=e.cookies.get(U.wuid.name);if(!t)return e.cookies.remove(U.wuidVisitId.name),e.cookies.remove(U.wuidVisitPersistence.name),{wuidVisitId:"",wuidVisitNum:0,nr:"new"};var n=e.cookies.get(U.wuidVisitId.name),r=e.cookies.get(U.wuidVisitPersistence.name),o=(n||"").split(":"),i=o[0],a=o[2],s=o[3],u=1;if("v1"===i&&s===t){var c=Number(o[1])||1/0;isFinite(c)&&(u=r?c:c+1)}for(var d=""+u;7>d.length;)d="0"+d;var l=Date.now();if("v1"===i&&s===t){var f=Number(a)||1/0;isFinite(f)&&r&&(l=f)}var p=["v1",d,l,t].join(":");return e.cookies.set(U.wuidVisitId,p),e.cookies.set(U.wuidVisitPersistence,l),{wuidVisitId:p,wuidVisitNum:u,nr:1===u?"new":"return"}}},Yt={enabled:!1},$t={name:"adobeAnalyticsSettings",run:function(e){return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:if(!(t=e.getOr("remoteConfig")))return[2,Yt];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t(e,{configName:O.AdobeAnalyticsSettings})];case 2:return[2,n.sent()];case 3:return n.sent(),[2,Yt];case 4:return[2]}}))}))}},Qt=[$t,Ft,Ye,dt,Ee,Vt,Wt,ot,lt,yt,At,jt,He,Rt,Kt,zt,Bt,Ht,Jt],Zt={enrichTimeout:1500,disablePageLoad:!1,disableSpaUpdateLocation:!1,internalDomains:["tinkoff.ru","tinkoffinsurance.ru","dolyame.ru","tbank.ru"]},Xt=function(){var e=document.body,t=document.documentElement,n=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);return{viewport:document.documentElement.clientHeight,height:n,scrollTop:window.pageYOffset||document.documentElement.scrollTop}},en=he(2,(function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{}].concat(t))})),tn=en,nn={scrollEventName:"pageScroll",eventDelay:300},rn={viewport:"ta_viewport_previous",scroll:"ta_scroll_previous",height:"ta_height_previous"},on={viewport:"previousViewport",scroll:"previousScroll",height:"previousHeight"};function an(e,t){try{sessionStorage.setItem(rn[e],t.toString())}catch(e){return}}function sn(e){for(var t=0,n=mt(e);n.length>t;t++){var r=n[t],o=e[r];void 0!==o&&an(r,o)}}function un(){return["viewport","scroll","height"].reduce((function(e,t){var n=function(e){try{var t=sessionStorage.getItem(rn[e])||"",n=parseInt(t,10);return isNaN(n)?void 0:n}catch(e){return}}(t);return void 0!==n&&(e[on[t]]=n),e}),{})}function cn(e){var t=e.tracking,n=performance.timing.navigationStart;t.on("newLocation",(function(){n=+new Date,t.remove("timing")}));for(var r=function(e){t.on("event:"+e,(function(){var r;n&&t.extend(((r={})["timing."+e]=+new Date-n,r))}))},o=0,i=["pageLoad"];i.length>o;o++){r(i[o])}}function dn(e){return e.length>0?e[0].toUpperCase()+e.slice(1):e}function ln(e,t){return oe(e,t.split("."))}function fn(e,t,n){return Object.keys(t).every((function(r){return function(e,t){return t.split("|").some((function(t){return void 0!==ln(e,t)}))}(e,r)||t[r]&&Date.now()-n>=t[r]}))}function pn(e){var n,r=e.timeouts,o=void 0===r?{}:r,i=e.readyEvent,a=e.readyEventPayload,s=e.action,u=e.beforeEvent,d=e.tracked,l=e.blocked,f=e.resetOnSPATransition,p=void 0!==f&&f,m=void 0!==d&&d,v=void 0!==l&&l,g=Date.now(),h=!1,y=t({},a),w=function(){if(!n)throw new Error("plugin isn't bound");var e=s||n.event;if(!h&&!v&&!m&&function(){if(!n)throw new Error("plugin isn't bound");return fn(n.state,o,g)}()){h=!0;var t=[];u&&J(u,{waitFor:function(e){t.push(e)}},document),t.length>0?Promise.all(t).then((function(){n.emit("private"+dn(i)),e(i,y)})):(n.emit("private"+dn(i)),e(i,y))}},b=Object.keys(o),_=function(){g=Date.now(),m=!1,h=!1,w(),h||k()},k=function(){b.forEach((function(e){var t=o[e];isFinite(t)&&t&&setTimeout(w,t+1)}))};return{name:"data-observer",trySend:w,setTracked:function(e){m=e,h=e},setBlocked:function(e){v=e,n&&!v&&w()},plugin:function(e){n=e.tracking,k(),setTimeout(w),n.on("event:"+i,(function(){if(m=!0,c.getItem("twt:tracking:do")){console.group("do:"+i);for(var e=0,t=b;t.length>e;e++)for(var r=0,o=t[e].split("|");o.length>r;r++){var a=o[r],s=ln(n.state,a);console.log(a,": "+typeof s,"=",s)}console.groupEnd()}})),n.on("change",w),n.on("do:"+i+":invalidate",w),p&&n.on("newLocation",_)}}}var mn={adblock:1e3};function vn(e,t){return void 0===t&&(t={}),new Promise((function(n,r){var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=e,Object.assign(i,t),o.appendChild(i),i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Error when loading "+e+" script"))}}))}function gn(e,t,n){return r(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),r=n+"/twa/ttm/"+e.account+"/publications/"+e.container+"/index.js",t.data({},"hit"),[4,vn(r,{crossOrigin:"anonymous"})];case 1:return o.sent(),[3,3];case 2:return i=o.sent(),t.error(i,"loading-error"),[3,3];case 3:return[2]}}))}))}function hn(e){try{return JSON.stringify(e)}catch(e){return"Stringify error while log try - payload error"}}function yn(e){return e instanceof Error?{message:e.message,name:e.name,stack:e.stack}:e}var wn=function(e,t){var n=this;this.account=e,this.container=t,this.sendDataProbability=.01,this.sendErrorProbability=1,this.tinkoffLoggerUrl="https://www.tinkoff.ru/api/front/log/collect",this.errorsLimit=20,this.errorsByTypes={},this.sendLog=function(e,t,r){var o;if(Math.random()<=e)return fetch(n.tinkoffLoggerUrl,{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:hn({system:"ttm",appName:"ttm",component:"ttm-twt-loader",from:"browser",level:t,ttmInfo:{account:n.account,container:n.container,buildId:"none",twtVersion:null===(o=window.tracking)||void 0===o?void 0:o._version,session:n.session},ttmData:r})}).catch((function(){return null}))},this.setTTMConfig=function(e){n.account=e.account,n.container=e.container},this.error=function(e,t){var r;n.errorsByTypes[t]||(n.errorsByTypes[t]=0),n.errorsByTypes[t]+=1,n.errorsByTypes[t]===n.errorsLimit&&n.sendLog(1,"info",{logType:"error-limit-exceeded",data:hn({type:t,errorLimit:n.errorsLimit})}),n.errorsLimit>n.errorsByTypes[t]&&n.sendLog(n.sendErrorProbability,"error",{logType:t,message:(r=e,r&&"object"==typeof r&&"message"in r?r.message:null),data:hn(yn(e))})},this.data=function(e,t){n.sendLog(n.sendDataProbability,"info",{logType:t,data:hn(yn(e))})},this.session="twt-"+Date.now()+"-"+Math.round(1e5*Math.random())},bn=["supreme"];function _n(e){return function(t){var n,r=t.tracking,o=t.config,i=new wn("none","none");try{var a,s=o.ttm||function(){var e,t=(b((null===(e=document.currentScript)||void 0===e?void 0:e.getAttribute("src"))||"").query.ttm||"").split("_"),n=t[0],r=void 0===n?"":n,o=t[1],i=void 0===o?"":o;return r&&i?{account:r,container:i}:void 0}()||e;if(!function(e){if(!e||"object"!=typeof e)return!1;var t=e.account,n=e.container;return"string"==typeof t&&"string"==typeof n&&!!t&&!!n}(s)||!function(e){var t;return!c.getItem("_twt_ttm_disabled_")&&!bn.includes(null===(t=e.state)||void 0===t?void 0:t.appName)}(r))return;try{a=new URL((null===(n=document.currentScript)||void 0===n?void 0:n.getAttribute("src"))||"").origin}catch(e){a="https://acdn.tinkoff.ru"}i.setTTMConfig(s),r.addEventsHandler((function(e,t){try{window.ttm=window.ttm||[],window.ttm.push({event:e,data:t})}catch(e){i.error(e,"runtime-error")}})),"complete"===document.readyState?gn(s,i,a):window.addEventListener("load",(function(){return gn(s,i,a)}))}catch(e){i.error(e,"runtime-error")}}}var kn=function(){var e;try{if(!((null===(e=document.currentScript)||void 0===e?void 0:e.getAttribute("src"))||"").includes("cdn-tinkoff.ru"))return;if(Math.random()>.001)return;fetch("https://www.tinkoff.ru/api/front/log/collect",{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:JSON.stringify({system:"twt",appName:"twt",component:"twt-cdn-monitoring",from:"browser",level:"info",legacyCdn:!0})}).catch((function(){return null}))}catch(e){}};var Sn=function(e){var t,n=e.context.get("logger"),r=new URL("https://acdn.tinkoff.ru/eventea/bundle/eventea.bundle.js"),o=b((null===(t=document.currentScript)||void 0===t?void 0:t.getAttribute("src"))||"").search;r.search=o,vn(r.toString(),{async:!0}).then((function(){n.info("eventea is successfully loaded")})).catch((function(e){n.error(e,"eventea loading is failed")}))},En=function(e){var t=e.context;document.body.addEventListener("click",(function(e){if(e.target){var n=function(e){if(e instanceof Element)for(var t=e;t&&t!=document.body;){if(t instanceof HTMLAnchorElement)return t;t=t.parentElement}return null}(e.target);if(n){var r=t.get("location");if(n.hostname&&r.hostname!==n.hostname){var o=n.href.split("?")[1]||"",i=function(e){var t,n;return Array.isArray(null===(t=null===window||void 0===window?void 0:window._evnteq)||void 0===t?void 0:t.queue)?e.get("eventea"):"function"==typeof(null===(n=null===window||void 0===window?void 0:window.__eventea)||void 0===n?void 0:n.send)?null===window||void 0===window?void 0:window.__eventea:null}(t);null==i||i.send({project:"pwa",event:"exitLink",payload:{hostname:n.hostname,path:n.pathname,query:o}})}}}}))};function xn(e){var t=e.tracking;if("undefined"!=typeof window&&window.history&&window.history.pushState){var n=window.history.pushState;window.history.pushState=function(){for(var e=[],r=0;arguments.length>r;r++)e[r]=arguments[r];setTimeout((function(){return t.updateLocation()})),n.apply(window.history,e)},window.addEventListener("popstate",(function(){setTimeout((function(){return t.updateLocation()}))}))}}var Cn=function(e){var t=e.context,n=Rt.run(t),r=t.cookies.get(U.statistDeviceId.name);n&&r!==n&&t.cookies.set(U.statistDeviceId,n)};var In,Pn,On={name:"makeEventeaHandler",init:function(e){var t=e.tracking,n=function(e){!function(e,t){var n=t.event,r=t.config,o=void 0===r?{}:r,i=t.payload,a=n,s=void 0===i?{}:i;"pushTrack"===o.type&&(a=o.type,s.pageAction?s._event=n:s.pageAction=n),e.event.call({isSendContext:!0,fromEventea:!0},a,s)}(t,e)};return function(){return n}}},Tn={name:"makeEventeaDataHandler",init:function(e){var t=e.tracking,n=function(e){!function(e,t){var n=t.payload;e.extend(void 0===n?{}:n)}(t,e)};return function(){return n}}};function Mn(e){var t="tiktokIframeLoaded",n=e.getOr(t);if(n)return n;var r=new Promise((function(t,n){var r=e.get("config").cdnUrl;if(!r)throw new Error("cdnUrl is not specified");for(var o={src:r+"modules/tiktok-iframe/v1/index.html",width:"1",height:"1",frameborder:"0",border:"0",style:"position: fixed; left: -9999px; bottom: -9999px;"},i=document.createElement("iframe"),a=0,s=mt(o);s.length>a;a++){var u=s[a];i.setAttribute(u,o[u])}i.onerror=function(){return n(new Error("failed to load tiktok iframe"))},i.onload=function(){return t(i)},document.body.appendChild(i)}));return e.bind(t,r),r}function An(e,t,n){return r(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return r=e.get("logger"),[4,Mn(e)];case 1:return i=o.sent(),[2,new Promise((function(e,o){var a,s=t+Date.now().toString(),u=function(t){var n=t.data;n.id===s&&(n.result===Pn.Succeeded?(r.info("tiktok iframe successful response for message",t.data),e(t.data)):(r.warn("tiktok iframe bad response for message",t.data),o(new Error(t.data.reason))),window.removeEventListener("message",u))},c={id:s,type:t,data:n};r.info("message to tiktok iframe has been sent",c),window.addEventListener("message",u),null===(a=i.contentWindow)||void 0===a||a.postMessage(c,"*")}))]}}))}))}!function(e){e.Init="tiktokInit",e.Track="tiktokTrack"}(In||(In={})),function(e){e.Succeeded="succeeded",e.Failed="failed"}(Pn||(Pn={}));var jn={name:"ttq",init:function(e){var t=this,n=e.context;return function(){for(var e=[],i=0;arguments.length>i;i++)e[i]=arguments[i];return r(t,void 0,void 0,(function(){var t;return o(this,(function(r){switch(t=e[1],e[0]){case"init":return[2,An(n,In.Init,{pixelId:t})];case"track":return[2,An(n,In.Track,{pixelId:t,event:e[2]})]}return[2]}))}))}}},Ln={name:"fbq",init:function(e){return e.context.get("logger").info("fbq util has been replaced with empty function. Calls like tracking.callUtil('fbq', ...) will be ignored"),function(){}}};var Dn=he(2,(function(e,t){void 0===t&&(t=[]);for(var n=0;t.length>n;n++)if(e(t[n],n,t))return t[n]})),Nn=he(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var n={},r=0;e.length>r;r++){var o=e[r];o in t&&(n[o]=t[o])}return n}));function qn(e,n){var r,o=n.get("request"),i=n.get("logger");return function(a,s){void 0===s&&(s={});var u=n.get("config").partnersApi,c=function(e,n){var r=n.get("location"),o=""+r.hostname+r.pathname,i=Nn(["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],e.state.utmMarkers||{});return t({click_id:e.state.tcpaClickId||"",request_id:e.state.hid||"",product_name:e.state.productName||"",product_category:e.state.productCategory||"",absolute_url:o},i)}(e,n),d=t(t({},c),s),l=function(e,t){var n=[],r=[];mt(e).forEach((function(o){var i=e[o];if(i||n.push(o),t&&t[o]!==i){var a=t[o];a!==i&&r.push({key:o,previousValue:a,currentValue:i})}}));var o={errorsCount:n.length+r.length};return n.length&&(o.emptyValuesKeys=n),r.length&&(o.differentValuesKeys=r.map((function(e){return e.key})),o.differentValues=r),o}(d,r);if(r=d,d.click_id){l.errorsCount>0&&function(e,n,r,o){var i=n.location,a=i.origin,s=i.pathname;n.get("logger").warn("tcpa-pixels params errors",o),n.get("collectLog")(n,t({level:"WARN",page:""+a+s,component:"tcpa-pixels",eventName:r,appName:e.state.appName||"unknown"},o)).catch((function(){}))}(e,n,a,l);var f,p,m,v,g,h=t(t({},d),{event_date:(f=new Date,p=function(e){return 10>e?"0"+e:e},m=f.getTimezoneOffset(),v=0>m?"+":"-",g=Math.abs(m),f.getFullYear()+"-"+p(f.getMonth()+1)+"-"+p(f.getDate())+"T"+p(f.getHours())+":"+p(f.getMinutes())+":"+p(f.getSeconds())+v+p(g/60)+":"+p(g%60)),event_id:a});return o(u+"postbacks",{method:"POST",body:h}).catch((function(e){i.error(e,"tcpa-pixels request error")}))}}}var Un=function(e){var t=e.tracking,n=["formAutosave","formSubmit","formCompleted"],r=qn(t,e.context);t.on("event",(function(e){var t,o=e;1===(null===(t=e.match(/\./g))||void 0===t?void 0:t.length)&&(o=e.split(".")[1]);var i=Dn((function(e){return e===o}),n);i&&r(i)})),t.on("event:resultScreenShown",(function(){"pfpmvno"===t.state.appName&&r("formSubmit")})),t._tempMvnoFunnelEvent=!0,t.addUtil({name:"tcpaSendEvent",init:function(){return r}})},Rn="TWT_COOKIES_SYNC_TUNA_HANDSHAKE",Vn="TWT_COOKIES_SYNC_TUNA_COOKIES_SYNC",Wn={__P__wuid:{defaultExpiresSec:31536e4,priority:"old",useDefaultExpiration:!0},__P__wuid_last_update_time:{defaultExpiresSec:31536e4,priority:"old",useDefaultExpiration:!0},__P__wuid_visit_id:{defaultExpiresSec:63072e3,priority:"old",useDefaultExpiration:!0},utm_source:{defaultExpiresSec:5184e3,priority:"new"},utm_medium:{defaultExpiresSec:5184e3,priority:"new"},utm_campaign:{defaultExpiresSec:5184e3,priority:"new"},utm_content:{defaultExpiresSec:5184e3,priority:"new"},utm_term:{defaultExpiresSec:5184e3,priority:"new"},tcpa_click_id:{defaultExpiresSec:5184e3,priority:"new"},wm:{defaultExpiresSec:5184e3,priority:"new"},sid:{defaultExpiresSec:5184e3,priority:"new"},"dco.id":{defaultExpiresSec:31536e3,priority:"old",useDefaultExpiration:!0},PD_accountId:{defaultExpiresSec:5184e3,priority:"new"},PD_offerZeroCd:{defaultExpiresSec:5184e3,priority:"new"},PD_timestamp:{defaultExpiresSec:5184e3,priority:"new"},click_id:{defaultExpiresSec:5184e3,priority:"new"},wm_id:{defaultExpiresSec:5184e3,priority:"new"},short_link:{defaultExpiresSec:5184e3,priority:"new"}},zn={__P__wuid:"done",__P__wuid_last_update_time:"done",__P__wuid_visit_id:"done",utm_source:"done",utm_medium:"done",utm_campaign:"done",utm_content:"done",utm_term:"done",tcpa_click_id:"done",wm:"done",sid:"done","dco.id":"done-1",PD_accountId:"done-1",PD_offerZeroCd:"done-1",PD_timestamp:"done-1",click_id:"done-1",wm_id:"done-1",short_link:"done-1"},Fn="https://www.tinkoff.ru",Bn="twt_ccs_d",Hn={cookieManagerError:"cookies-sync-cookie-manager-error",iframeLoadError:"cookies-sync-iframe-load-failed",syncTimeout:"cookies-sync-timeout",syncFailed:"cookies-sync-process-failed",rewriteSSOIframeFailed:"cookies-sync-rewrite-sso-iframe-failed"},Gn={syncStarted:"cookies-sync-started",syncDone:"cookies-sync-done",twtRun:"cookies-sync-twt-run",rewriteSSOIframe:"cookies-sync-rewrite-sso-iframe-wuid",noOldCookies:"cookies-sync-no-old-cookies"},Jn=function(){return null},Kn=function(e){var t=new wn("none-cookies-sync","none-cookies-sync"),n=H({logger:{error:function(e){return t.error(e,Hn.cookieManagerError)},warn:Jn,info:Jn,log:Jn,debug:Jn}}),r=!1,o=function(){r||(r=!0,e())};try{var i=!!window.location.search.includes("sss_test_cookie_sync"),a=n.get(Bn),s="done-1",u=function(){var e=n.get("dco.id");n.set("dco.id",e,31536e3,!0)};if(u(),setTimeout((function(){u()}),5e3),!window.location.hostname.endsWith(".tbank.ru")||a===s)return void o();t.data("sync started",Gn.syncStarted);for(var c={src:"https://www.tinkoff.ru/cookie-sync/",width:"1",height:"1",frameborder:"0",border:"0",style:"position: absolute; left: -9999px; bottom: -9999px;"},d=document.createElement("iframe"),l=0,f=mt(c);f.length>l;l++){var p=f[l];d.setAttribute(p,c[p])}document.body.appendChild(d),d.onerror=function(e){t.error(e,Hn.iframeLoadError),o()},d.onload=function(){var e;null===(e=d.contentWindow)||void 0===e||e.postMessage({type:Rn},Fn)};var m=!1;setTimeout((function(){m||(o(),m=!0,t.error({message:"iframe timeout 5000ms exceeded"},Hn.syncTimeout))}),5e3),window.addEventListener("message",(function(e){try{if(e.origin!==Fn||a===s||!("data"in e)||!e.data||"object"!=typeof e.data||!("type"in e.data)||e.data.type!==Vn||m)return;m=!0;var r=e.data.cookies;i&&console.log("\n\n\nCOOKIES_SYNC",r,"\n\n\n");var u=[];0===Object.keys(r).length&&t.data("No old cookies found",Gn.noOldCookies);!function(){var e=n.get("utm_source");if(Object.keys(r).forEach((function(t){if(Wn[t]&&!(a?"done"===a?["done"]:"done-1"===a?["done","done-1"]:[]:[]).includes(zn[t])){var o=r[t].value,i=n.get(t),s=-1===r[t].expiresSec||Wn[t].useDefaultExpiration?Wn[t].defaultExpiresSec:r[t].expiresSec;if((i||o)&&(!i||o)){if(!i&&o){if(e&&(t.startsWith("utm_")||"wm"===t||"sid"===t))return;return n.set(t,o,s,!0),void(t.startsWith("__P__wuid")&&("__P__wuid"===t&&n.remove("__P__wuid_visit_persistence",!0),u.push({name:t,oldCookie:o,expiresSec:s})))}if("new"!==Wn[t].priority)return"old"===Wn[t].priority?(n.set(t,o,s,!0),void(t.startsWith("__P__wuid")&&("__P__wuid"===t&&(n.remove("__P__wuid_visit_persistence",!0),setTimeout((function(){window._evnteq||(window._evnteq=[]),window._evnteq.push(["send",{project:"pwa",event:"wuid.synchronized",payload:{oldWuid:o,newWuid:i}}])}))),u.push({name:t,oldCookie:o,expiresSec:s})))):void 0}}})),!a){var c=!1;window.addEventListener("message",(function(e){var o,a,s,d;try{var l=e.data;if(i&&console.log("Got message "+JSON.stringify(l)),"object"==typeof l&&l&&"messageCode"in l&&"string"==typeof l.messageCode&&l.messageCode.startsWith("auth")&&!c&&(c=!0,i&&console.log("Hack fired "),t.data("rewriteSSOIframe",Gn.rewriteSSOIframe),u.some((function(e){return"__P__wuid"===e.name}))&&r.__P__wuid&&n.get("__P__wuid")!==r.__P__wuid.value)){var f=!1;u.forEach((function(e){n.get(e.name)!==e.oldCookie&&(n.set(e.name,e.oldCookie,e.expiresSec,!0),"__P__wuid"===e.name&&(f=!0))})),u.length>0&&(n.remove("__P__wuid_visit_persistence",!0),f&&!r.__P__wuid_visit_id&&n.remove("__P__wuid_visit_id",!0),null===(a=null===(o=window.tracking)||void 0===o?void 0:o._prot)||void 0===a||a.applyDataProvider(Rt),null===(d=null===(s=window.tracking)||void 0===s?void 0:s._prot)||void 0===d||d.applyDataProvider(Kt))}}catch(e){.01>Math.random()&&t.error(e,Hn.rewriteSSOIframeFailed)}}))}n.set(Bn,s,31536e4,!0),t.data({message:"cookie set"},Gn.syncDone),o(),t.data({message:"twt run"},Gn.twtRun)}()}catch(e){o(),t.error(e,Hn.syncFailed)}}))}catch(e){return console.error(e),o(),void t.error(e,Hn.syncFailed)}};!function(e){var r,o=t(t(t({},e),Zt),Object.assign({},window.twtConfig,window.twtDebugConfig)),i=b((null===(r=document.currentScript)||void 0===r?void 0:r.getAttribute("src"))||"").query,s="disable-page-load"in i||o.disablePageLoad,u="disable-spa-update-location"in i||o.disableSpaUpdateLocation;o.disableUserInfo="disable-user-info"in i||o.disableUserInfo;var c=i["statist-api"]||o.statistApi;if(c){var d=window._statistClientInitOptions||(window._statistClientInitOptions={});(d.transportOptions||(d.transportOptions={})).endpointUrl=c}var l=new a(Q());function f(){var e=tt(l,Qt,o).use((function(e){var n=e.context,r=n.location.query.parent_url;if(r){var o=n.get("parseUrl"),i=o(decodeURIComponent(r)),a=t(t({},function(e,t){var n=e.query,r=t.query;if(["utm_source","utm_medium","utm_campaign"].some((function(e){return!!n[e]})))return{};for(var o={},i=0,a=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"];a.length>i;i++){var s=a[i],u=r[s];"string"==typeof u&&(o[s]=u)}return o}(n.location,i)),function(e,t){var n,r=t.query;return e.query.rb_clickid||!r.rb_clickid?{}:((n={}).rb_clickid=r.rb_clickid,n)}(n.location,i));if(Object.keys(a).length>0){var s=o(n.location.href),u=t(t({},s.query),a);s.search=Lt((function(e,t){var n=u[t];return void 0!==n&&e.push(encodeURIComponent(t)+"="+encodeURIComponent(n)),e}),[],Object.keys(u)).join("&"),window.history.replaceState(window.history.state,"",s.href)}}})).use(_n()).use(kn).use(function(e){var r=tn(nn,e),o=r.eventDelay,i=r.scrollEventName;return function(e){var r=e.tracking,a={viewport:0,height:0,scroll:0};function s(){var e=Xt(),r=e.scrollTop,o=n(e,["scrollTop"]);return a=t(t({},o),{scroll:Math.max(a.scroll,r)})}function u(){a={viewport:0,height:0,scroll:0};var e=Xt().scrollTop;r.extend(t(t({scrollOnPage:e},s()),un()))}u(),window.addEventListener("scroll",pt(o,(function(){var e=s();r.extend(e).event(i,e)}))),window.addEventListener("beforeunload",(function(){sn(a)})),r.on("newLocation",(function(){sn(a),u()}))}}()).use(cn).use(Un).use(Sn).use(En).use(Cn).addUtil(On).addUtil(Tn).addUtil(jn).addUtil(Ln);s||e.use(function(e){void 0===e&&(e={});var n,r,o=e.timeouts,i=void 0===o?mn:o,a=e.waitFor,s=e.tracked,u=e.useEventea,c=e.eventPayload,d=!!a,l=pn({readyEvent:"pageLoad",readyEventPayload:t(t({},void 0===c?{}:c),{initiator:"web-tracking"}),action:function(e,t){if(!n)throw new Error("action call: Plugin pageLoad isn't bound");u&&r.get("eventea").send({project:"pwa",event:"pageLoad",payload:t}),n.event("pageLoad",t)},beforeEvent:"beforePageLoad",timeouts:i,tracked:s,resetOnSPATransition:!0,blocked:d});return a&&a.then((function(){l.setBlocked(!1)})),function(e){return n=e.tracking,r=e.context,l.plugin(e)}}({timeouts:{adblock:500},useEventea:!0})),u||e.use(xn)}Kn((function(){f()}))}({api:"https://www.tinkoff.ru/api/v1/",configApi:"https://config.tinkoff.ru/",papiBase:"https://www.tinkoff.ru/",enrichApi:"https://enrichment.tinkoff.ru/",frontLogApi:"/api/front/log/",cdnUrl:"https://acdn.tinkoff.ru/twa/",resourceApi:"https://acdn.tinkoff.ru/",partnersApi:"https://partners.tinkoff.ru/",statistApi:"https://api-statist.tinkoff.ru"})}();
